<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hi dashboard - blue16</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="animations.css">
    <link rel="stylesheet" href="avatar-editor.css">
    <script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Dashboard Layout -->
    <div class="dashboard-layout">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <img src="https://see.fontimg.com/api/rf5/nRoyY/YzA4MzM4MDJkMDY5NDQ4NDhmMjkxOTliNTQwMTAxZjMudHRm/Ymx1ZTE2/boblox-04-regular.png?r=fs&h=80&w=100&fg=FFFFFF&bg=FFFFFF&tb=1&s=65" alt="BLUE16" class="logo-sidebar">
                </div>
                <div class="sidebar-user">
                    <div class="user-avatar">
                        <span class="iconify" data-icon="mdi:account-circle"></span>
                    </div>
                    <div class="user-info">
                        <span class="user-name" id="sidebar-username">kitty</span>
                        <span class="user-status">onlinrrrr</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-menu">
                <ul class="menu-list">
                    <li class="menu-item">
                        <a href="#" class="menu-link active" data-section="dashboard">
                            <span class="iconify" data-icon="mdi:view-dashboard"></span>
                            <span>dashboard</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="download">
                            <span class="iconify" data-icon="mdi:download"></span>
                            <span>download</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="files">
                            <span class="iconify" data-icon="mdi:folder"></span>
                            <span>files</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="games">
                            <span class="iconify" data-icon="mdi:gamepad-variant"></span>
                            <span>games</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="servers">
                            <span class="iconify" data-icon="mdi:server"></span>
                            <span>servers</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="news-status">
                            <span class="iconify" data-icon="mdi:newspaper"></span>
                            <span>news & status</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="invites">
                            <span class="iconify" data-icon="mdi:key-variant"></span>
                            <span>invites</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="notifications">
                            <span class="iconify" data-icon="mdi:bell"></span>
                            <span>notifications</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="sidebar-footer">
                <ul class="menu-list">
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="profile">
                            <span class="iconify" data-icon="mdi:account"></span>
                            <span>profile</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link" data-section="settings">
                            <span class="iconify" data-icon="mdi:cog"></span>
                            <span>settings</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="../index.html" class="menu-link">
                            <span class="iconify" data-icon="mdi:logout"></span>
                            <span>logout</span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Header -->
            <header class="top-header">
                <div class="header-left">
                    <button class="sidebar-toggle" id="sidebarToggle">
                        <span class="iconify" data-icon="mdi:menu"></span>
                    </button>
                    <h1 class="page-title" id="pageTitle">dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="header-actions">
                        <button class="action-btn" id="notificationsBtn">
                            <span class="iconify" data-icon="mdi:bell"></span>
                            <span class="notification-badge">3</span>
                        </button>
                        <button class="action-btn" id="profileBtn">
                            <span class="iconify" data-icon="mdi:account"></span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Content Sections -->
            <div class="content-wrapper">
                <!-- Dashboard Section -->
                <section class="content-section active" id="dashboard-section">
                    <div class="welcome-banner">
                        <div class="welcome-content">
                            <h2 class="welcome-title">welcome back <span class="gradient-text" id="username">kitty</span>!</h2>
                            <p class="welcome-subtitle">today is tokyo. <img style="width:30px;height:30px;" src="https://emoji-cdn.mqrio.dev/ðŸ˜Ž?style=joypixels-animations" /></p>
                        </div>
                        <div class="welcome-actions">
                            <button class="btn btn-primary">
                                <span class="iconify" data-icon="mdi:gamepad-variant"></span>
                                start playing
                            </button>
                            <button class="btn btn-secondary">
                                <span class="iconify" data-icon="mdi:server"></span>
                                host server
                            </button>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <span class="iconify" data-icon="mdi:gamepad-variant"></span>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value">12</div>
                                <div class="stat-label">games played</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <span class="iconify" data-icon="mdi:server"></span>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value">3</div>
                                <div class="stat-label">servers hosted</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <span class="iconify" data-icon="mdi:account-group"></span>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value">24</div>
                                <div class="stat-label">friends online</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <span class="iconify" data-icon="mdi:medal"></span>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value">8</div>
                                <div class="stat-label">achievements</div>
                            </div>
                        </div>
                    </div>

                    <!-- Content Grid -->
                    <div class="content-grid">
                        <!-- Recent Activity -->
                        <div class="content-card">
                            <div class="card-header">
                                <h3 class="card-title">
                                    <span class="iconify" data-icon="mdi:history"></span>
                                    recent activity
                                </h3>
                                <button class="card-action">
                                    <span class="iconify" data-icon="mdi:dots-vertical"></span>
                                </button>
                            </div>
                            <div class="card-content">
                                <div class="activity-list">
                                    <div class="activity-item">
                                        <div class="activity-icon">
                                            <span class="iconify" data-icon="mdi:gamepad-variant"></span>
                                        </div>
                                        <div class="activity-content">
                                            <div class="activity-title">played "classic obby"</div>
                                            <div class="activity-time">2 hours ago</div>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon">
                                            <span class="iconify" data-icon="mdi:server"></span>
                                        </div>
                                        <div class="activity-content">
                                            <div class="activity-title">hosted "friends server"</div>
                                            <div class="activity-time">yesterday</div>
                                        </div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon">
                                            <span class="iconify" data-icon="mdi:download"></span>
                                        </div>
                                        <div class="activity-content">
                                            <div class="activity-title">downloaded "retro racing"</div>
                                            <div class="activity-time">2 days ago</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="content-card">
                            <div class="card-header">
                                <h3 class="card-title">
                                    <span class="iconify" data-icon="mdi:lightbulb-on-outline"></span>
                                    quick actions
                                </h3>
                            </div>
                            <div class="card-content">
                                <div class="quick-actions">
                                    <button class="quick-action-btn">
                                        <span class="iconify" data-icon="mdi:download"></span>
                                        <span>download client</span>
                                    </button>
                                    <button class="quick-action-btn">
                                        <span class="iconify" data-icon="mdi:server"></span>
                                        <span>create server</span>
                                    </button>
                                    <button class="quick-action-btn">
                                    <span class="iconify" data-icon="mdi:folder"></span>
                                    <span>upload files</span>
                                </button>
                                <button class="quick-action-btn">
                                    <span class="iconify" data-icon="mdi:account-group"></span>
                                    <span>invite friends</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- News & Status Section -->
                <section class="content-section" id="news-status-section">
                    <div class="section-header">
                        <h2 class="section-title">news & status</h2>
                        <p class="section-subtitle">stay updated with the latest news and server information.</p>
                    </div>

                    <div class="news-status-grid">
                        <!-- Latest News -->
                        <div class="news-card">
                            <div class="card-header">
                                <h3 class="card-title">
                                    <span class="iconify" data-icon="mdi:file-document-outline"></span>
                                    latest news
                                </h3>
                                <button class="card-action" id="viewAllNewsBtn">
                                    <span class="iconify" data-icon="mdi:arrow-top-right"></span>
                                    view all
                                </button>
                            </div>
                            <div class="card-content">
                                <div class="news-list" id="newsList">
                                    <div class="news-item">
                                        <div class="news-badge">new</div>
                                        <div class="news-content">
                                            <div class="news-date">september 19, 2025</div>
                                            <h4 class="news-title">dashboard update</h4>
                                            <p class="news-excerpt">we have updated the dashboard with new features and improvements</p>
                                            <div class="news-meta">
                                                <span class="news-category">update</span>
                                                <span class="news-read-time">3 min read</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="news-actions">
                                    <button class="btn btn-secondary btn-sm" id="refreshNewsBtn">
                                        <span class="iconify" data-icon="mdi:refresh"></span>
                                        refresh
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Server Status -->
                        <div class="status-card">
                            <div class="card-header">
                                <h3 class="card-title">
                                    <span class="iconify" data-icon="mdi:server-network"></span>
                                    server status
                                </h3>
                                <button class="card-action" id="refreshStatusBtn">
                                    <span class="iconify" data-icon="mdi:refresh"></span>
                                    refresh
                                </button>
                            </div>
                            <div class="card-content">
                                <div class="status-overview">
                                    <div class="overall-status" id="overallStatus">
                                        <div class="status-icon">
                                            <span class="iconify" data-icon="mdi:check-circle"></span>
                                        </div>
                                        <div class="status-text">
                                            <div class="status-title">all systems operational</div>
                                            <div class="status-subtitle">last checked: <span id="lastChecked">just now</span></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="server-status-list" id="serverStatusList">
                                    <div class="server-status-item" id="status-main">
                                        <div class="server-status-indicator" id="status-main-ind">
                                            <div class="status-dot"></div>
                                        </div>
                                        <div class="server-status-info">
                                            <div class="server-status-name">main server</div>
                                            <div class="server-status-details" id="status-main-details">checking...</div>
                                            <div class="server-status-meta">
                                                <span class="server-uptime">uptime: 99.9%</span>
                                                <span class="server-response">response: 45ms</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="server-status-item" id="status-game">
                                        <div class="server-status-indicator" id="status-game-ind">
                                            <div class="status-dot"></div>
                                        </div>
                                        <div class="server-status-info">
                                            <div class="server-status-name">game server</div>
                                            <div class="server-status-details" id="status-game-details">checking...</div>
                                            <div class="server-status-meta">
                                                <span class="server-uptime">uptime: 98.5%</span>
                                                <span class="server-response">response: 32ms</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="server-status-item" id="status-file">
                                        <div class="server-status-indicator" id="status-file-ind">
                                            <div class="status-dot"></div>
                                        </div>
                                        <div class="server-status-info">
                                            <div class="server-status-name">file server</div>
                                            <div class="server-status-details" id="status-file-details">checking...</div>
                                            <div class="server-status-meta">
                                                <span class="server-uptime">uptime: 99.7%</span>
                                                <span class="server-response">response: 28ms</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="server-status-item" id="status-api">
                                        <div class="server-status-indicator" id="status-api-ind">
                                            <div class="status-dot"></div>
                                        </div>
                                        <div class="server-status-info">
                                            <div class="server-status-name">api services</div>
                                            <div class="server-status-details" id="status-api-details">checking...</div>
                                            <div class="server-status-meta">
                                                <span class="server-uptime">uptime: 99.8%</span>
                                                <span class="server-response">response: 51ms</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="status-actions">
                                    <button class="btn btn-secondary btn-sm" id="subscribeStatusBtn">
                                        <span class="iconify" data-icon="mdi:bell"></span>
                                        subscribe to alerts
                                    </button>
                                    <button class="btn btn-secondary btn-sm" id="statusHistoryBtn">
                                        <span class="iconify" data-icon="mdi:history"></span>
                                        view history
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Download Section -->
                <section class="content-section" id="download-section">
                    <div class="section-header">
                        <h2 class="section-title">download launcher</h2>
                        <p class="section-subtitle">get started with blue16 by downloading our launcher. the launcher will allow you to easily access all the classic roblox clients and games.</p>
                    </div>
                    <div class="download-grid">
                        <div class="download-card">
                            <div class="download-icon">
                                <span class="iconify" data-icon="mdi:microsoft-windows"></span>
                            </div>
                            <h3 class="download-title">windows</h3>
                            <p class="download-desc">compatible with windows 7 and above</p>
                            <button class="btn btn-primary download-btn" onclick="showDownloadPrompt('windows')">
                                <span class="iconify" data-icon="mdi:download"></span>
                                download for windows
                            </button>
                        </div>
                        <div class="download-card">
                            <div class="download-icon">
                                <span class="iconify" data-icon="mdi:apple"></span>
                            </div>
                            <h3 class="download-title">macos</h3>
                            <p class="download-desc">compatible with macos 10.12 and above</p>
                            <button class="btn btn-primary download-btn" onclick="showDownloadPrompt('mac')">
                                <span class="iconify" data-icon="mdi:download"></span>
                                download for macos
                            </button>
                        </div>
                        <div class="download-card">
                            <div class="download-icon">
                                <span class="iconify" data-icon="mdi:linux"></span>
                            </div>
                            <h3 class="download-title">linux</h3>
                            <p class="download-desc">compatible with most linux distributions</p>
                            <button class="btn btn-primary download-btn" onclick="showDownloadPrompt('linux')">
                                <span class="iconify" data-icon="mdi:download"></span>
                                download for linux
                            </button>
                        </div>
                    </div>
                    <div class="download-notes">
                        <h3>installation notes</h3>
                        <ul class="notes-list">
                            <li>make sure to check your antivirus software if the launcher is flagged</li>
                            <li>our launcher is completely safe and open-source</li>
                            <li>for any issues, please visit our support page or contact us</li>
                        </ul>
                    </div>
                    <!-- Download prompt modal -->
                    <div id="downloadPromptModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(10,20,40,0.7); z-index:9999; align-items:center; justify-content:center;">
                        <div style="background:#1e2940; border-radius:16px; padding:32px 24px; max-width:350px; margin:auto; box-shadow:0 8px 32px rgba(33,150,243,0.18); text-align:center;">
                            <h3 style="color:#4fc3f7; margin-bottom:18px;">choose download method</h3>
                            <p style="color:#b0b0b0; margin-bottom:24px;">support development by downloading with ads, or get a direct link.</p>
                            <button class="btn btn-primary" id="directDownloadBtn" style="margin-bottom:12px; width:100%;">direct download</button>
                            <button class="btn btn-secondary" id="adDownloadBtn" style="width:100%;">ad-supported download</button>
                            <br><br>
                            <button class="btn btn-sm" onclick="closeDownloadPrompt()" style="margin-top:10px;">cancel</button>
                        </div>
                    </div>
                </section>

                <!-- Files Section -->
                <section class="content-section" id="files-section">
                    <div class="section-header">
                        <h2 class="section-title">manage your files</h2>
                        <p class="section-subtitle">upload, download, and manage your game files and resources.</p>
                    </div>

                    <div class="files-container">
                        <div class="upload-section">
                            <div class="upload-area">
                                <span class="iconify" data-icon="mdi:upload"></span>
                                <h3>upload a file</h3>
                                <p>drag and drop files here or click to browse</p>
                                <input type="file" id="fileInput" class="file-input" multiple>
                                <button class="btn btn-primary upload-btn">
                                    <span class="iconify" data-icon="mdi:upload"></span>
                                    choose files
                                </button>
                            </div>
                        </div>

                        <div class="files-list">
                            <div class="files-header">
                                <h3>your files</h3>
                                <div class="files-actions">
                                    <button class="btn btn-secondary">
                                        <span class="iconify" data-icon="mdi:download"></span>
                                        download all
                                    </button>
                                </div>
                            </div>
                            <div class="file-items">
                                <div class="file-item">
                                    <div class="file-icon">
                                        <span class="iconify" data-icon="mdi:file"></span>
                                    </div>
                                    <div class="file-info">
                                        <div class="file-name">classic_obby.rbxl</div>
                                        <div class="file-details">2.3 mb â€¢ uploaded 2 days ago</div>
                                    </div>
                                    <div class="file-actions">
                                        <button class="action-btn">
                                            <span class="iconify" data-icon="mdi:download"></span>
                                        </button>
                                        <button class="action-btn">
                                            <span class="iconify" data-icon="mdi:delete"></span>
                                        </button>
                                    </div>
                                </div>
                                <div class="file-item">
                                    <div class="file-icon">
                                        <span class="iconify" data-icon="mdi:file"></span>
                                    </div>
                                    <div class="file-info">
                                        <div class="file-name">retro_racing.rbxl</div>
                                        <div class="file-details">1.8 mb â€¢ uploaded 1 week ago</div>
                                    </div>
                                    <div class="file-actions">
                                        <button class="action-btn">
                                            <span class="iconify" data-icon="mdi:download"></span>
                                        </button>
                                        <button class="action-btn">
                                            <span class="iconify" data-icon="mdi:delete"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Games Section -->
                <section class="content-section" id="games-section">
                    <div class="section-header">
                        <h2 class="section-title">game library</h2>
                        <p class="section-subtitle">browse and download classic roblox games.</p>
                    </div>

                    <div class="games-grid">
                        <div class="game-card">
                            <div class="game-image">
                                <img src="../src/img/placeholder.png" alt="classic obby">
                            </div>
                            <div class="game-content">
                                <h3 class="game-title">classic obby</h3>
                                <p class="game-desc">a nostalgic obstacle course from 2008</p>
                                <div class="game-meta">
                                    <span class="game-year">2008</span>
                                    <span class="game-players">1.2k players</span>
                                </div>
                                <button class="btn btn-primary game-btn">
                                    <span class="iconify" data-icon="mdi:download"></span>
                                    download
                                </button>
                            </div>
                        </div>

                        <div class="game-card">
                            <div class="game-image">
                                <img src="../src/img/placeholder.png" alt="retro racing">
                            </div>
                            <div class="game-content">
                                <h3 class="game-title">retro racing</h3>
                                <p class="game-desc">classic racing game from 2010</p>
                                <div class="game-meta">
                                    <span class="game-year">2010</span>
                                    <span class="game-players">856 players</span>
                                </div>
                                <button class="btn btn-primary game-btn">
                                    <span class="iconify" data-icon="mdi:download"></span>
                                    download
                                </button>
                            </div>
                        </div>

                        <div class="game-card">
                            <div class="game-image">
                                <img src="../src/img/placeholder.png" alt="old tycoon">
                            </div>
                            <div class="game-content">
                                <h3 class="game-title">old tycoon</h3>
                                <p class="game-desc">original tycoon game from 2009</p>
                                <div class="game-meta">
                                    <span class="game-year">2009</span>
                                    <span class="game-players">2.1k players</span>
                                </div>
                                <button class="btn btn-primary game-btn">
                                    <span class="iconify" data-icon="mdi:download"></span>
                                    download
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Servers Section -->
                <section class="content-section" id="servers-section">
                    <div class="section-header">
                        <h2 class="section-title">server management</h2>
                        <p class="section-subtitle">create and manage your own servers.</p>
                    </div>

                    <div class="servers-container">
                        <div class="server-actions">
                            <button class="btn btn-primary">
                                <span class="iconify" data-icon="mdi:plus"></span>
                                create new server
                            </button>
                        </div>

                        <div class="servers-grid">
                            <div class="server-card">
                                <div class="server-header">
                                    <div class="server-status online"></div>
                                    <h3 class="server-name">friends server</h3>
                                </div>
                                <div class="server-info">
                                    <p class="server-desc">private server for friends</p>
                                    <div class="server-meta">
                                        <span class="server-players">5/20 players</span>
                                        <span class="server-uptime">2 hours</span>
                                    </div>
                                </div>
                                <div class="server-actions">
                                    <button class="btn btn-secondary">
                                        <span class="iconify" data-icon="mdi:cog"></span>
                                        manage
                                    </button>
                                    <button class="btn btn-primary">
                                        <span class="iconify" data-icon="mdi:play"></span>
                                        join
                                    </button>
                                </div>
                            </div>

                            <div class="server-card">
                                <div class="server-header">
                                    <div class="server-status offline"></div>
                                    <h3 class="server-name">public server</h3>
                                </div>
                                <div class="server-info">
                                    <p class="server-desc">public server for everyone</p>
                                    <div class="server-meta">
                                        <span class="server-players">0/50 players</span>
                                        <span class="server-uptime">offline</span>
                                    </div>
                                </div>
                                <div class="server-actions">
                                    <button class="btn btn-secondary">
                                        <span class="iconify" data-icon="mdi:cog"></span>
                                        manage
                                    </button>
                                    <button class="btn btn-primary">
                                        <span class="iconify" data-icon="mdi:play"></span>
                                        start
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Invites Section -->
                <section class="content-section" id="invites-section">
                    <div class="section-header">
                        <h2 class="section-title">invite management</h2>
                        <p class="section-subtitle">generate and manage invite keys for blue16.</p>
                    </div>

                    <div class="invites-container">
                        <div class="invite-actions">
                            <button class="btn btn-primary">
                                <span class="iconify" data-icon="mdi:key-variant"></span>
                                generate new key
                            </button>
                        </div>

                        <div class="invites-list">
                            <div class="invite-item">
                                <div class="invite-key">blue16-abc123-def456</div>
                                <div class="invite-info">
                                    <span class="invite-status active">active</span>
                                    <span class="invite-uses">0/1 uses</span>
                                </div>
                                <div class="invite-actions">
                                    <button class="action-btn">
                                        <span class="iconify" data-icon="mdi:content-copy"></span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="iconify" data-icon="mdi:delete"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Notifications Section -->
                <section class="content-section" id="notifications-section">
                    <div class="section-header">
                        <h2 class="section-title">notifications</h2>
                        <p class="section-subtitle">stay updated with blue16 news and updates.</p>
                    </div>

                    <div class="notifications-list">
                        <div class="notification-item unread">
                            <div class="notification-icon">
                                <span class="iconify" data-icon="mdi:bell"></span>
                            </div>
                            <div class="notification-content">
                                <div class="notification-title">new client available</div>
                                <div class="notification-message">a new classic roblox client has been added to the download section.</div>
                                <div class="notification-time">2 hours ago</div>
                            </div>
                            <button class="notification-action">
                                <span class="iconify" data-icon="mdi:check"></span>
                            </button>
                        </div>

                        <div class="notification-item">
                            <div class="notification-icon">
                                <span class="iconify" data-icon="mdi:account-group"></span>
                            </div>
                            <div class="notification-content">
                                <div class="notification-title">friend request</div>
                                <div class="notification-message">johndoe wants to be your friend on blue16.</div>
                                <div class="notification-time">1 day ago</div>
                            </div>
                            <div class="notification-actions">
                                <button class="btn btn-secondary btn-sm">accept</button>
                                <button class="btn btn-secondary btn-sm">decline</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Profile Section -->
                <section class="content-section" id="profile-section">
                    <div class="section-header">
                        <h2 class="section-title">profile</h2>
                        <p class="section-subtitle">manage your account information and preferences.</p>
                    </div>

                    <div class="profile-container">
                        <!-- Profile Header -->
                        <div class="profile-header">
                            <div class="profile-avatar-section">
                                <div class="profile-avatar-wrapper">
                                    <img src="../src/img/cat.png" alt="user avatar" class="profile-avatar" id="profileAvatar">
                                    <button class="avatar-edit-btn" id="editAvatarBtn">
                                        <span class="iconify" data-icon="mdi:camera"></span>
                                    </button>
                                </div>
                            </div>
                            <div class="profile-basic-info">
                                <div class="profile-name-section">
                                    <h3 class="profile-display-name" id="profileDisplayName">kitty</h3>
                                    <p class="profile-username" id="profileUsername">@kitty</p>
                                    <p class="profile-email" id="profileEmail">kitty@example.com</p>
                                </div>
                                <div class="profile-badges">
                                    <span class="profile-badge verified">
                                        <span class="iconify" data-icon="mdi:verified"></span>
                                        verified
                                    </span>
                                    <span class="profile-badge premium">
                                        <span class="iconify" data-icon="mdi:crown"></span>
                                        premium
                                    </span>
                                    <span class="profile-badge veteran">
                                        <span class="iconify" data-icon="mdi:medal"></span>
                                        veteran
                                    </span>
                                </div>
                            </div>
                            <div class="profile-stats">
                                <div class="profile-stat-item">
                                    <span class="stat-number" id="gamesCount">12</span>
                                    <span class="stat-label">games</span>
                                </div>
                                <div class="profile-stat-item">
                                    <span class="stat-number" id="serversCount">3</span>
                                    <span class="stat-label">servers</span>
                                </div>
                                <div class="profile-stat-item">
                                    <span class="stat-number" id="friendsCount">24</span>
                                    <span class="stat-label">friends</span>
                                </div>
                                <div class="profile-stat-item">
                                    <span class="stat-number" id="achievementsCount">8</span>
                                    <span class="stat-label">achievements</span>
                                </div>
                            </div>
                        </div>

                        <div class="profile-content">
                            <div class="profile-sidebar">
                                <div class="profile-nav">
                                    <button class="profile-nav-btn active" data-section="personal">
                                        <span class="iconify" data-icon="mdi:account"></span>
                                        personal info
                                    </button>
                                    <button class="profile-nav-btn" data-section="account">
                                        <span class="iconify" data-icon="mdi:account-cog"></span>
                                        account
                                    </button>
                                    <button class="profile-nav-btn" data-section="security">
                                        <span class="iconify" data-icon="mdi:shield-lock"></span>
                                        security
                                    </button>
                                    <button class="profile-nav-btn" data-section="privacy">
                                        <span class="iconify" data-icon="mdi:shield-account"></span>
                                        privacy
                                    </button>
                                    <button class="profile-nav-btn" data-section="preferences">
                                        <span class="iconify" data-icon="mdi:tune"></span>
                                        preferences
                                    </button>
                                </div>
                            </div>

                            <div class="profile-main">
                                <!-- Personal Information Section -->
                                <div class="profile-section active" id="personal-section">
                                    <div class="profile-section-header">
                                        <h3 class="profile-section-title">
                                            <span class="iconify" data-icon="mdi:account"></span>
                                            personal information
                                        </h3>
                                        <button class="btn btn-primary btn-sm" id="editPersonalBtn">
                                            <span class="iconify" data-icon="mdi:pencil"></span>
                                            edit
                                        </button>
                                    </div>
                                    <div class="profile-section-content">
                                        <div class="info-grid">
                                            <div class="info-group">
                                                <label class="info-label">display name</label>
                                                <div class="info-value-display" id="displayNameDisplay">kitty</div>
                                                <input type="text" class="info-value-edit" id="displayNameEdit" value="kitty" style="display: none;">
                                            </div>
                                            <div class="info-group">
                                                <label class="info-label">username</label>
                                                <div class="info-value-display" id="usernameDisplay">@kitty</div>
                                                <input type="text" class="info-value-edit" id="usernameEdit" value="kitty" style="display: none;">
                                            </div>
                                            <div class="info-group">
                                                <label class="info-label">email</label>
                                                <div class="info-value-display" id="emailDisplay">kitty@example.com</div>
                                                <input type="email" class="info-value-edit" id="emailEdit" value="kitty@example.com" style="display: none;">
                                            </div>
                                            <div class="info-group">
                                                <label class="info-label">bio</label>
                                                <div class="info-value-display" id="bioDisplay">gaming enthusiast and roblox fan</div>
                                                <textarea class="info-value-edit" id="bioEdit" style="display: none;">gaming enthusiast and roblox fan</textarea>
                                            </div>
                                            <div class="info-group">
                                                <label class="info-label">location</label>
                                                <div class="info-value-display" id="locationDisplay">united states</div>
                                                <input type="text" class="info-value-edit" id="locationEdit" value="united states" style="display: none;">
                                            </div>
                                            <div class="info-group">
                                                <label class="info-label">timezone</label>
                                                <div class="info-value-display" id="timezoneDisplay">est (utc-5)</div>
                                                <select class="info-value-edit" id="timezoneEdit" style="display: none;">
                                                    <option value="est (utc-5)" selected>est (utc-5)</option>
                                                    <option value="cst (utc-6)">cst (utc-6)</option>
                                                    <option value="mst (utc-7)">mst (utc-7)</option>
                                                    <option value="pst (utc-8)">pst (utc-8)</option>
                                                    <option value="gmt (utc+0)">gmt (utc+0)</option>
                                                    <option value="cet (utc+1)">cet (utc+1)</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="profile-actions" id="personalActions" style="display: none;">
                                            <button class="btn btn-secondary" id="cancelPersonalBtn">cancel</button>
                                            <button class="btn btn-primary" id="savePersonalBtn">save changes</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Account Section -->
                                <div class="profile-section" id="account-section">
                                    <div class="profile-section-header">
                                        <h3 class="profile-section-title">
                                            <span class="iconify" data-icon="mdi:account-cog"></span>
                                            account details
                                        </h3>
                                    </div>
                                    <div class="profile-section-content">
                                        <div class="account-details-grid">
                                            <div class="account-detail-item">
                                                <div class="account-detail-icon">
                                                    <span class="iconify" data-icon="mdi:calendar"></span>
                                                </div>
                                                <div class="account-detail-info">
                                                    <h4>joined date</h4>
                                                    <p>june 1, 2023</p>
                                                </div>
                                            </div>
                                            <div class="account-detail-item">
                                                <div class="account-detail-icon">
                                                    <span class="iconify" data-icon="mdi:clock"></span>
                                                </div>
                                                <div class="account-detail-info">
                                                    <h4>last login</h4>
                                                    <p>2 hours ago</p>
                                                </div>
                                            </div>
                                            <div class="account-detail-item">
                                                <div class="account-detail-icon">
                                                    <span class="iconify" data-icon="mdi:crown"></span>
                                                </div>
                                                <div class="account-detail-info">
                                                    <h4>account type</h4>
                                                    <p class="premium-status">premium member</p>
                                                </div>
                                            </div>
                                            <div class="account-detail-item">
                                                <div class="account-detail-icon">
                                                    <span class="iconify" data-icon="mdi:email-check"></span>
                                                </div>
                                                <div class="account-detail-info">
                                                    <h4>email verification</h4>
                                                    <p class="verified-status">verified</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="account-actions">
                                            <button class="btn btn-secondary" id="downloadDataBtn">
                                                <span class="iconify" data-icon="mdi:download"></span>
                                                download my data
                                            </button>
                                            <button class="btn btn-danger" id="deleteAccountBtn">
                                                <span class="iconify" data-icon="mdi:delete"></span>
                                                delete account
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Security Section -->
                                <div class="profile-section" id="security-section">
                                    <div class="profile-section-header">
                                        <h3 class="profile-section-title">
                                            <span class="iconify" data-icon="mdi:shield-lock"></span>
                                            security settings
                                        </h3>
                                    </div>
                                    <div class="profile-section-content">
                                        <div class="security-options">
                                            <div class="security-option">
                                                <div class="security-option-header">
                                                    <div class="security-option-icon">
                                                        <span class="iconify" data-icon="mdi:lock-reset"></span>
                                                    </div>
                                                    <div class="security-option-info">
                                                        <h4>password</h4>
                                                        <p>last changed 3 months ago</p>
                                                    </div>
                                                </div>
                                                <button class="btn btn-secondary" id="changePasswordBtn">change</button>
                                            </div>
                                            <div class="security-option">
                                                <div class="security-option-header">
                                                    <div class="security-option-icon">
                                                        <span class="iconify" data-icon="mdi:two-factor-authentication"></span>
                                                    </div>
                                                    <div class="security-option-info">
                                                        <h4>two-factor authentication</h4>
                                                        <p>add an extra layer of security</p>
                                                    </div>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="twoFactorToggle">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="security-option">
                                                <div class="security-option-header">
                                                    <div class="security-option-icon">
                                                        <span class="iconify" data-icon="mdi:devices"></span>
                                                    </div>
                                                    <div class="security-option-info">
                                                        <h4>active sessions</h4>
                                                        <p>3 devices currently logged in</p>
                                                    </div>
                                                </div>
                                                <button class="btn btn-secondary" id="manageSessionsBtn">manage</button>
                                            </div>
                                            <div class="security-option">
                                                <div class="security-option-header">
                                                    <div class="security-option-icon">
                                                        <span class="iconify" data-icon="mdi:login-variant"></span>
                                                    </div>
                                                    <div class="security-option-info">
                                                        <h4>login history</h4>
                                                        <p>view recent login activity</p>
                                                    </div>
                                                </div>
                                                <button class="btn btn-secondary" id="loginHistoryBtn">view</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Privacy Section -->
                                <div class="profile-section" id="privacy-section">
                                    <div class="profile-section-header">
                                        <h3 class="profile-section-title">
                                            <span class="iconify" data-icon="mdi:shield-account"></span>
                                            privacy settings
                                        </h3>
                                    </div>
                                    <div class="profile-section-content">
                                        <div class="privacy-settings">
                                            <div class="privacy-setting">
                                                <div class="privacy-setting-info">
                                                    <h4>profile visibility</h4>
                                                    <p>control who can see your profile</p>
                                                </div>
                                                <select class="form-select" id="profileVisibilitySelect">
                                                    <option value="everyone">everyone</option>
                                                    <option value="friends">friends only</option>
                                                    <option value="private">private</option>
                                                </select>
                                            </div>
                                            <div class="privacy-setting">
                                                <div class="privacy-setting-info">
                                                    <h4>show online status</h4>
                                                    <p>let others see when youre online</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="onlineStatusToggle" checked>
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="privacy-setting">
                                                <div class="privacy-setting-info">
                                                    <h4>activity status</h4>
                                                    <p>share your gaming activity with friends</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="activityStatusToggle" checked>
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="privacy-setting">
                                                <div class="privacy-setting-info">
                                                    <h4>data collection</h4>
                                                    <p>help improve our services with usage data</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="dataCollectionToggle">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="privacy-setting">
                                                <div class="privacy-setting-info">
                                                    <h4>marketing emails</h4>
                                                    <p>receive updates about new features</p>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="marketingEmailsToggle">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Preferences Section -->
                                <div class="profile-section" id="preferences-section">
                                    <div class="profile-section-header">
                                        <h3 class="profile-section-title">
                                            <span class="iconify" data-icon="mdi:tune"></span>
                                            preferences
                                        </h3>
                                    </div>
                                    <div class="profile-section-content">
                                        <div class="preferences-settings">
                                            <div class="preference-setting">
                                                <div class="preference-setting-info">
                                                    <h4>language</h4>
                                                    <p>choose your preferred language</p>
                                                </div>
                                                <select class="form-select" id="languageSelect">
                                                    <option value="en" selected>english</option>
                                                    <option value="es">espaÃ±ol</option>
                                                    <option value="fr">franÃ§ais</option>
                                                    <option value="de">deutsch</option>
                                                    <option value="pt">portuguÃªs</option>
                                                </select>
                                            </div>
                                            <div class="preference-setting">
                                                <div class="preference-setting-info">
                                                    <h4>date format</h4>
                                                    <p>choose how dates are displayed</p>
                                                </div>
                                                <select class="form-select" id="dateFormatSelect">
                                                    <option value="mm/dd/yyyy" selected>mm/dd/yyyy</option>
                                                    <option value="dd/mm/yyyy">dd/mm/yyyy</option>
                                                    <option value="yyyy-mm-dd">yyyy-mm-dd</option>
                                                </select>
                                            </div>
                                            <div class="preference-setting">
                                                <div class="preference-setting-info">
                                                    <h4>time format</h4>
                                                    <p>12-hour or 24-hour time format</p>
                                                </div>
                                                <select class="form-select" id="timeFormatSelect">
                                                    <option value="12h" selected>12-hour</option>
                                                    <option value="24h">24-hour</option>
                                                </select>
                                            </div>
                                            <div class="preference-setting">
                                                <div class="preference-setting-info">
                                                    <h4>start page</h4>
                                                    <p>choose which page to show on login</p>
                                                </div>
                                                <select class="form-select" id="startPageSelect">
                                                    <option value="dashboard" selected>dashboard</option>
                                                    <option value="games">games</option>
                                                    <option value="servers">servers</option>
                                                    <option value="news-status">news & status</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Settings Section -->
                <section class="content-section" id="settings-section">
                    <div class="section-header">
                        <h2 class="section-title">settings</h2>
                        <p class="section-subtitle">personalize your experience and privacy.</p>
                    </div>

                    <div class="settings-container">
                        <div class="settings-sidebar">
                            <div class="settings-nav">
                                <button class="settings-nav-btn active" data-category="appearance">
                                    <span class="iconify" data-icon="mdi:palette"></span>
                                    appearance
                                </button>
                                <button class="settings-nav-btn" data-category="account">
                                    <span class="iconify" data-icon="mdi:account-cog"></span>
                                    account
                                </button>
                                <button class="settings-nav-btn" data-category="privacy">
                                    <span class="iconify" data-icon="mdi:shield-account"></span>
                                    privacy
                                </button>
                                <button class="settings-nav-btn" data-category="notifications">
                                    <span class="iconify" data-icon="mdi:bell"></span>
                                    notifications
                                </button>
                                <button class="settings-nav-btn" data-category="gaming">
                                    <span class="iconify" data-icon="mdi:gamepad-variant"></span>
                                    gaming
                                </button>
                                <button class="settings-nav-btn" data-category="advanced">
                                    <span class="iconify" data-icon="mdi:cog"></span>
                                    advanced
                                </button>
                                <button class="settings-nav-btn" data-category="currency">
                                    <span class="iconify" data-icon="mdi:coin"></span>
                                    currency
                                </button>
                            </div>
                        </div>

                        <div class="settings-content">
                            <!-- Appearance Settings -->
                            <div class="settings-category active" id="appearance-settings">
                                <div class="settings-card">
                                    <div class="card-header">
                                        <h4 class="card-title">
                                            <span class="iconify" data-icon="mdi:palette"></span>
                                            appearance
                                        </h4>
                                    </div>
                                    <div class="card-content">
                                        <div class="settings-group">
                                            <h5>theme customization</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>interface theme</h6>
                                                    <p>choose your preferred color scheme</p>
                                                </div>
                                                <div class="setting-control">
                                                    <div class="theme-selector">
                                                        <button class="theme-option active" data-theme="dark">
                                                            <span class="iconify" data-icon="mdi:weather-night"></span>
                                                            dark
                                                        </button>
                                                        <button class="theme-option" data-theme="light">
                                                            <span class="iconify" data-icon="mdi:white-balance-sunny"></span>
                                                            light
                                                        </button>
                                                        <button class="theme-option" data-theme="ocean">
                                                            <span class="iconify" data-icon="mdi:water"></span>
                                                            ocean
                                                        </button>
                                                        <button class="theme-option" data-theme="forest">
                                                            <span class="iconify" data-icon="mdi:tree"></span>
                                                            forest
                                                        </button>
                                                        <button class="theme-option" data-theme="sunset">
                                                            <span class="iconify" data-icon="mdi:weather-sunset"></span>
                                                            sunset
                                                        </button>
                                                        <button class="theme-option" data-theme="galaxy">
                                                            <span class="iconify" data-icon="mdi:stars"></span>
                                                            galaxy
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>accent color</h6>
                                                    <p>customize the primary accent color</p>
                                                </div>
                                                <div class="setting-control">
                                                    <input type="color" class="color-picker" value="#4fc3f7">
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>font size</h6>
                                                    <p>adjust the text size throughout the interface</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option>small</option>
                                                        <option selected>medium</option>
                                                        <option>large</option>
                                                        <option>extra large</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>interface effects</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>animations</h6>
                                                    <p>enable smooth transitions and animations</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>background effects</h6>
                                                    <p>enable animated background gradients</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>reduce motion</h6>
                                                    <p>minimize animations for accessibility</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox">
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>layout preferences</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>sidebar position</h6>
                                                    <p>choose sidebar placement</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option selected>left</option>
                                                        <option>right</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>compact mode</h6>
                                                    <p>use a more compact interface layout</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox">
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Account Settings -->
                            <div class="settings-category" id="account-settings">
                                <div class="settings-card">
                                    <div class="card-header">
                                        <h4 class="card-title">
                                            <span class="iconify" data-icon="mdi:account-cog"></span>
                                            account
                                        </h4>
                                    </div>
                                    <div class="card-content">
                                        <div class="settings-group">
                                            <h5>account information</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>username</h6>
                                                    <p>your unique identifier</p>
                                                </div>
                                                <div class="setting-control">
                                                    <span class="setting-value">kitty</span>
                                                    <button class="btn btn-secondary btn-sm">change</button>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>email address</h6>
                                                    <p>primary email for account communication</p>
                                                </div>
                                                <div class="setting-control">
                                                    <span class="setting-value">kitty@example.com</span>
                                                    <button class="btn btn-secondary btn-sm">change</button>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>display name</h6>
                                                    <p>name shown to other users</p>
                                                </div>
                                                <div class="setting-control">
                                                    <input type="text" class="form-input" value="kitty">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>language & region</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>interface language</h6>
                                                    <p>language for the dashboard interface</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option selected>english (us)</option>
                                                        <option>espaÃ±ol</option>
                                                        <option>franÃ§ais</option>
                                                        <option>deutsch</option>
                                                        <option>ä¸­æ–‡</option>
                                                        <option>æ—¥æœ¬èªž</option>
                                                        <option>í•œêµ­ì–´</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>time zone</h6>
                                                    <p>your local time zone</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option>utc-12:00</option>
                                                        <option>utc-11:00</option>
                                                        <option>utc-10:00</option>
                                                        <option>utc-9:00</option>
                                                        <option>utc-8:00</option>
                                                        <option>utc-7:00</option>
                                                        <option selected>utc-5:00 (est)</option>
                                                        <option>utc-4:00 (edt)</option>
                                                        <option>utc+0:00 (gmt)</option>
                                                        <option>utc+1:00 (cet)</option>
                                                        <option>utc+2:00 (eet)</option>
                                                        <option>utc+3:00 (msk)</option>
                                                        <option>utc+8:00 (cst)</option>
                                                        <option>utc+9:00 (jst)</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>date format</h6>
                                                    <p>preferred date display format</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option selected>mm/dd/yyyy</option>
                                                        <option>dd/mm/yyyy</option>
                                                        <option>yyyy-mm-dd</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>time format</h6>
                                                    <p>12-hour or 24-hour time display</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option selected>12-hour</option>
                                                        <option>24-hour</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>account management</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>account status</h6>
                                                    <p>current account standing</p>
                                                </div>
                                                <div class="setting-control">
                                                    <span class="status-badge good">active</span>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>account type</h6>
                                                    <p>your subscription tier</p>
                                                </div>
                                                <div class="setting-control">
                                                    <span class="status-badge premium">premium</span>
                                                    <button class="btn btn-secondary btn-sm">manage</button>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>delete account</h6>
                                                    <p>permanently delete your account and all data</p>
                                                </div>
                                                <div class="setting-control">
                                                    <button class="btn btn-danger btn-sm">delete account</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Privacy Settings -->
                            <div class="settings-category" id="privacy-settings">
                                <div class="settings-card">
                                    <div class="card-header">
                                        <h4 class="card-title">
                                            <span class="iconify" data-icon="mdi:shield-account"></span>
                                            privacy
                                        </h4>
                                    </div>
                                    <div class="card-content">
                                        <div class="settings-group">
                                            <h5>profile privacy</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>profile visibility</h6>
                                                    <p>who can view your profile information</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option>everyone</option>
                                                        <option>friends only</option>
                                                        <option selected>friends of friends</option>
                                                        <option>private</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>show online status</h6>
                                                    <p>display when you're online to others</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>activity sharing</h6>
                                                    <p>share your gaming activity with friends</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>friend requests</h6>
                                                    <p>who can send you friend requests</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option>everyone</option>
                                                        <option selected>friends of friends</option>
                                                        <option>nobody</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>data & analytics</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>usage analytics</h6>
                                                    <p>help improve blue16 with anonymous usage data</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox">
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>personalized content</h6>
                                                    <p>receive personalized recommendations</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>crash reports</h6>
                                                    <p>send automatic crash reports to help fix issues</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>data management</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>download my data</h6>
                                                    <p>export all your account data</p>
                                                </div>
                                                <div class="setting-control">
                                                    <button class="btn btn-secondary btn-sm">download</button>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>data retention</h6>
                                                    <p>how long to keep your activity data</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option>1 month</option>
                                                        <option selected>6 months</option>
                                                        <option>1 year</option>
                                                        <option>forever</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Notification Settings -->
                            <div class="settings-category" id="notifications-settings">
                                <div class="settings-card">
                                    <div class="card-header">
                                        <h4 class="card-title">
                                            <span class="iconify" data-icon="mdi:bell"></span>
                                            notifications
                                        </h4>
                                    </div>
                                    <div class="card-content">
                                        <div class="settings-group">
                                            <h5>push notifications</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>browser notifications</h6>
                                                    <p>receive notifications in your browser</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>sound alerts</h6>
                                                    <p>play sound for new notifications</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox">
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>desktop notifications</h6>
                                                    <p>show notifications on your desktop</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>email notifications</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>important updates</h6>
                                                    <p>security and account-related emails</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>friend activity</h6>
                                                    <p>emails about friend requests and activity</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>game updates</h6>
                                                    <p>notifications about new games and updates</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox">
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>marketing emails</h6>
                                                    <p>promotional content and offers</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox">
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>notification preferences</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>notification frequency</h6>
                                                    <p>how often to receive batch notifications</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option>immediate</option>
                                                        <option selected>hourly</option>
                                                        <option>daily</option>
                                                        <option>weekly</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>quiet hours</h6>
                                                    <p>disable notifications during specific times</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox">
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>quiet hours start</h6>
                                                    <p>start time for quiet hours</p>
                                                </div>
                                                <div class="setting-control">
                                                    <input type="time" class="form-input" value="22:00">
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>quiet hours end</h6>
                                                    <p>end time for quiet hours</p>
                                                </div>
                                                <div class="setting-control">
                                                    <input type="time" class="form-input" value="08:00">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Gaming Settings -->
                            <div class="settings-category" id="gaming-settings">
                                <div class="settings-card">
                                    <div class="card-header">
                                        <h4 class="card-title">
                                            <span class="iconify" data-icon="mdi:gamepad-variant"></span>
                                            gaming
                                        </h4>
                                    </div>
                                    <div class="card-content">
                                        <div class="settings-group">
                                            <h5>game preferences</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>default game mode</h6>
                                                    <p>preferred mode when launching games</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option selected>windowed</option>
                                                        <option>fullscreen</option>
                                                        <option>borderless</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>graphics quality</h6>
                                                    <p>default graphics settings for games</p>
                                                </div>
                                                <div class="setting-control">
                                                    <select class="form-select">
                                                        <option>low</option>
                                                        <option selected>medium</option>
                                                        <option>high</option>
                                                        <option>ultra</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>auto-update games</h6>
                                                    <p>automatically update games to latest versions</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>voice & chat</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>voice chat</h6>
                                                    <p>enable voice communication in games</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>text chat</h6>
                                                    <p>enable text messaging in games</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>chat filter</h6>
                                                    <p>filter inappropriate language in chat</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>voice volume</h6>
                                                    <p>adjust voice chat volume</p>
                                                </div>
                                                <div class="setting-control">
                                                    <input type="range" class="form-range" min="0" max="100" value="75">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>social features</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>show online friends</h6>
                                                    <p>display friends who are currently online</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>friend invitations</h6>
                                                    <p>allow friends to invite you to games</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>auto-join friends</h6>
                                                    <p>automatically join friends when they invite you</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox">
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Advanced Settings -->
                            <div class="settings-category" id="advanced-settings">
                                <div class="settings-card">
                                    <div class="card-header">
                                        <h4 class="card-title">
                                            <span class="iconify" data-icon="mdi:cog"></span>
                                            advanced
                                        </h4>
                                    </div>
                                    <div class="card-content">
                                        <div class="settings-group">
                                            <h5>performance</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>hardware acceleration</h6>
                                                    <p>use gpu for better performance</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>background processes</h6>
                                                    <p>allow background downloads and updates</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>cache management</h6>
                                                    <p>clear cached files to free up space</p>
                                                </div>
                                                <div class="setting-control">
                                                    <button class="btn btn-secondary btn-sm">clear cache</button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>network</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>download speed limit</h6>
                                                    <p>limit download bandwidth (kb/s)</p>
                                                </div>
                                                <div class="setting-control">
                                                    <input type="number" class="form-input" value="0" min="0" max="10000">
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>upload speed limit</h6>
                                                    <p>limit upload bandwidth (kb/s)</p>
                                                </div>
                                                <div class="setting-control">
                                                    <input type="number" class="form-input" value="0" min="0" max="10000">
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>connection timeout</h6>
                                                    <p>seconds before connection times out</p>
                                                </div>
                                                <div class="setting-control">
                                                    <input type="number" class="form-input" value="30" min="5" max="300">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>developer options</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>developer mode</h6>
                                                    <p>enable advanced debugging features</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox">
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>console logging</h6>
                                                    <p>enable detailed console output</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox">
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>experimental features</h6>
                                                    <p>enable upcoming features in development</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox">
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>reset settings</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>reset to defaults</h6>
                                                    <p>restore all settings to default values</p>
                                                </div>
                                                <div class="setting-control">
                                                    <button class="btn btn-warning btn-sm">reset all</button>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>export settings</h6>
                                                    <p>save your current settings configuration</p>
                                                </div>
                                                <div class="setting-control">
                                                    <button class="btn btn-secondary btn-sm">export</button>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>import settings</h6>
                                                    <p>load settings from a configuration file</p>
                                                </div>
                                                <div class="setting-control">
                                                    <button class="btn btn-secondary btn-sm">import</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                            <!-- Currency Settings -->
                            <div class="settings-category" id="currency-settings">
                                <div class="settings-card">
                                    <div class="card-header">
                                        <h4 class="card-title">
                                            <span class="iconify" data-icon="mdi:coin"></span>
                                            currency
                                        </h4>
                                    </div>
                                    <div class="card-content">
                                        <div class="settings-group">
                                            <h5>notifications</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>currency notifications</h6>
                                                    <p>show notifications for currency changes</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" id="currencyNotifications" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>daily bonus reminder</h6>
                                                    <p>remind when daily bonus is available</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" id="dailyBonusReminder" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>privacy & history</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>transaction history</h6>
                                                    <p>keep record of all currency transactions</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" id="transactionHistory" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>currency sound effects</h6>
                                                    <p>play sounds when currency changes</p>
                                                </div>
                                                <div class="setting-control">
                                                    <label class="switch">
                                                        <input type="checkbox" id="currencySoundEffects" checked>
                                                        <span class="slider"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="settings-group">
                                            <h5>data management</h5>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>reset currency data</h6>
                                                    <p>clear all currency balances and history</p>
                                                </div>
                                                <div class="setting-control">
                                                    <button class="btn btn-danger btn-sm" id="resetCurrencyBtn">reset data</button>
                                                </div>
                                            </div>
                                            <div class="setting-item">
                                                <div class="setting-info">
                                                    <h6>export currency data</h6>
                                                    <p>download your currency data as JSON</p>
                                                </div>
                                                <div class="setting-control">
                                                    <button class="btn btn-secondary btn-sm" id="exportCurrencyBtn">export</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        <div class="settings-actions">
                            <button class="btn btn-secondary" id="reset-settings-btn">reset to defaults</button>
                            <button class="btn btn-primary" id="save-settings-btn">save settings</button>
                        </div>
                    </div>
                </section>
    <script>
        const API_BASE = (window.location.port === '5500') ? 'http://127.0.0.1:8000' : window.location.origin;
        // Navigation functionality
        const menuLinks = document.querySelectorAll('.menu-link');
        menuLinks.forEach(link => {
            if (link) {
                link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all links and sections
                document.querySelectorAll('.menu-link').forEach(l => l.classList.remove('active'));
                document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
                
                // Add active class to clicked link
                this.classList.add('active');
                
                // Show corresponding section
                const sectionId = this.getAttribute('data-section') + '-section';
                const section = document.getElementById(sectionId);
                if (section) {
                    section.classList.add('active');
                }
                
                // Update page title
                const pageTitle = document.getElementById('pageTitle');
                const sectionName = this.querySelector('span').textContent;
                if (pageTitle) pageTitle.textContent = sectionName;
            });
            }
        });

        // Sidebar toggle with persistence
        const layoutEl = document.querySelector('.dashboard-layout');
        const sidebarToggleBtn = document.getElementById('sidebarToggle');
        // Apply persisted state on load
        try {
            const savedCollapsed = localStorage.getItem('sidebarCollapsed');
            if (savedCollapsed === 'true') {
                layoutEl.classList.add('sidebar-collapsed');
            }
        } catch (e) { /* ignore storage errors */ }
        if (sidebarToggleBtn && layoutEl) {
            sidebarToggleBtn.addEventListener('click', function() {
                layoutEl.classList.toggle('sidebar-collapsed');
            try {
                localStorage.setItem('sidebarCollapsed', layoutEl.classList.contains('sidebar-collapsed'));
            } catch (e) { /* ignore storage errors */ }
            });
        }

        // Download functionality
        // Simple launcher URLs map (update these when real launcher URLs are ready)
        const LAUNCHER_URLS = {
            windows: {
                direct: 'https://github.com/bleu0-teem/client/releases/download/nightly/BLUE16Client-nightly.zip',
                ad: 'https://tpi.li/BLUE16NightlyRelease'
            },
            mac: {
                direct: 'https://github.com/blue16-team/blue16-web/raw/refs/heads/main/www/src/files/clients/InteractivePhysics.zip',
                ad: 'http://adfoc.us/8737011'
            },
            linux: {
                direct: 'https://github.com/blue16-team/blue16-web/raw/refs/heads/main/www/src/files/clients/InteractivePhysics.zip',
                ad: 'https://github.com/blue16-team/blue16-web/raw/refs/heads/main/www/src/files/clients/InteractivePhysics.zip?ad=1'
            }
        };
        function startDownload(url) {
            try {
                // Visual feedback
                showDownloadAnimation('Starting download...');
                // Trigger browser download
                const a = document.createElement('a');
                a.href = url;
                a.target = '_blank';
                a.rel = 'noopener';
                document.body.appendChild(a);
                a.click();
                a.remove();
            } catch (e) {
                console.error('Download failed', e);
                alert('Failed to start download. Please try again.');
            }
        }

        // File upload functionality
        const uploadBtn = document.querySelector('.upload-btn');
        const fileInput = document.getElementById('fileInput');
        
        if (uploadBtn && fileInput) {
            uploadBtn.addEventListener('click', function() {
                fileInput.click();
            });
        }

        if (fileInput) {
            fileInput.addEventListener('change', function() {
                if (this.files && this.files.length > 0) {
                    alert(`Selected ${this.files.length} file(s) for upload`);
                }
                // Implement actual upload logic here
            });
        }

        // Notification functionality
        const notificationActions = document.querySelectorAll('.notification-action');
        notificationActions.forEach(btn => {
            if (btn) {
                btn.addEventListener('click', function() {
                    const notification = this.closest('.notification-item');
                    if (notification) {
                        notification.classList.remove('unread');
                    }
                    this.style.display = 'none';
                });
            }
        });

        // Download prompt logic
        let currentPlatform = null;
        function showDownloadPrompt(platform) {
            currentPlatform = platform;
            document.getElementById('downloadPromptModal').style.display = 'flex';
        }
        function closeDownloadPrompt() {
            document.getElementById('downloadPromptModal').style.display = 'none';
            currentPlatform = null;
        }
        // Hook up download prompt buttons
        const directBtn = document.getElementById('directDownloadBtn');
        const adBtn = document.getElementById('adDownloadBtn');
        if (directBtn) {
            directBtn.onclick = function() {
                if (!currentPlatform || !LAUNCHER_URLS[currentPlatform]) {
                    alert('Unknown platform. Please choose Windows, MacOS, or Linux.');
                    return;
                }
                const url = LAUNCHER_URLS[currentPlatform].direct;
                closeDownloadPrompt();
                startDownload(url);
            };
        }
        if (adBtn) {
            adBtn.onclick = function() {
                if (!currentPlatform || !LAUNCHER_URLS[currentPlatform]) {
                    alert('Unknown platform. Please choose Windows, MacOS, or Linux.');
                    return;
                }
                const adUrl = LAUNCHER_URLS[currentPlatform].ad;
                // Open ad-supported page first (placeholder), then start download
                window.open(adUrl, '_blank', 'noopener');
                closeDownloadPrompt();
                // Optionally delay to simulate viewing an ad
                setTimeout(() => startDownload(LAUNCHER_URLS[currentPlatform].direct), 800);
            };
        }

        // Profile, Password, and Settings logic
        const profileForm = document.getElementById('profile-form');
        const profileFeedback = document.getElementById('profile-feedback');
        const passwordForm = document.getElementById('password-form');
        const passwordFeedback = document.getElementById('password-feedback');
        const settingsForm = document.getElementById('settings-form');
        const settingsFeedback = document.getElementById('settings-feedback');

        const avatarInput = document.getElementById('profile-avatar');
        const avatarImg = document.getElementById('avatar-preview');
        const avatarFallback = document.getElementById('avatar-fallback');

        // Helpers
        function notify(el, msg, ok=true){
            if (!el) return;
            el.textContent = msg;
            el.style.color = ok ? '#4fc3f7' : '#f44336';
        }
        function authHeaders(csrf){
            const token = localStorage.getItem('auth_token') || localStorage.getItem('token');
            const h = { 'Content-Type': 'application/json' };
            if (token) h['Authorization'] = `Bearer ${token}`;
            if (csrf) h['X-CSRF-Token'] = csrf;
            return h;
        }
        async function tryPost(paths, body, csrf){
            for (const p of paths){
                try {
                    const res = await fetch(`${API_BASE}${p}`, {
                        method: 'POST',
                        headers: authHeaders(csrf),
                        credentials: 'include',
                        body: JSON.stringify(body)
                    });
                    if (res.ok){
                        const data = await res.json().catch(()=>({ ok:true }));
                        return { ok:true, data };
                    }
                } catch (e){ /* try next */ }
            }
            return { ok:false };
        }

        // Avatar preview
        function updateAvatarPreview(url){
            if (url && /^https?:\/\//i.test(url)){
                avatarImg.style.display = 'block';
                avatarFallback.style.display = 'none';
                avatarImg.src = url;
            } else {
                avatarImg.style.display = 'none';
                avatarFallback.style.display = 'block';
                avatarImg.src = '';
            }
        }
        if (avatarInput){
            avatarInput.addEventListener('input', (e)=> updateAvatarPreview(e.target.value.trim()));
            avatarImg.addEventListener('error', ()=>{
                avatarImg.style.display = 'none';
                avatarFallback.style.display = 'block';
            });
        }

        // Avatar file upload -> preview and local persistence as data URL
        (function(){
            const fileInput = document.getElementById('avatar-file');
            const uploadBtn = document.getElementById('avatar-upload-btn');
            const clearBtn = document.getElementById('avatar-clear-btn');
            const urlInput = document.getElementById('profile-avatar');
            if (uploadBtn && fileInput){
                uploadBtn.addEventListener('click', ()=> fileInput.click());
            }
            if (fileInput){
                fileInput.addEventListener('change', ()=>{
                    const file = fileInput.files && fileInput.files[0];
                    if (!file) return;
                    if (!file.type.startsWith('image/')) { alert('Please select an image file.'); return; }
                    const reader = new FileReader();
                    reader.onload = function(){
                        const dataUrl = String(reader.result||'');
                        updateAvatarPreview(dataUrl);
                        if (urlInput) urlInput.value = dataUrl;
                    };
                    reader.readAsDataURL(file);
                });
            }
            if (clearBtn){
                clearBtn.addEventListener('click', ()=>{
                    if (urlInput) urlInput.value = '';
                    updateAvatarPreview('');
                });
            }
        })();

        // Load user profile (from API or localStorage)
        async function loadProfile(){
            const usernameEl = document.getElementById('profile-username');
            const emailEl = document.getElementById('profile-email');
            const avatarEl = document.getElementById('profile-avatar');
            const displayEl = document.getElementById('profile-displayname');
            const bioEl = document.getElementById('profile-bio');
            const socialEl = document.getElementById('profile-social');
            let loaded = false;
            try {
                const res = await fetch(`${API_BASE}/api/me.php`, { credentials: 'include', cache: 'no-store' });
                if (res.ok){
                    const me = await res.json();
                    if (me){
                        if (me.username) usernameEl.value = me.username;
                        if (me.email) emailEl.value = me.email;
                        if (me.avatar) { avatarEl.value = me.avatar; updateAvatarPreview(me.avatar); }
                        if (me.display_name && displayEl) displayEl.value = me.display_name;
                        if (me.bio && bioEl) bioEl.value = me.bio;
                        if (me.social && socialEl) socialEl.value = me.social;
                        loaded = true;
                        if (window.syncProfilePreview) window.syncProfilePreview();
                    }
                }
            } catch(e){ /* ignore */ }
            if (!loaded){
                const saved = JSON.parse(localStorage.getItem('user_profile')||'{}');
                if (saved.username) usernameEl.value = saved.username;
                if (saved.email) emailEl.value = saved.email;
                if (saved.avatar && avatarEl){ avatarEl.value = saved.avatar; updateAvatarPreview(saved.avatar); }
                if (saved.display_name && displayEl) displayEl.value = saved.display_name;
                if (saved.bio && bioEl) bioEl.value = saved.bio;
                if (saved.social && socialEl) socialEl.value = saved.social;
                if (window.syncProfilePreview) window.syncProfilePreview();
            }
        }
        loadProfile();

        // Profile save
        profileForm?.addEventListener('submit', async (e)=>{
            e.preventDefault();
            notify(profileFeedback, 'Saving...');
            const body = {
                username: document.getElementById('profile-username').value.trim(),
                email: document.getElementById('profile-email').value.trim(),
                avatar: document.getElementById('profile-avatar').value.trim(),
                display_name: (document.getElementById('profile-displayname')||{value:''}).value.trim(),
                bio: (document.getElementById('profile-bio')||{value:''}).value.trim(),
                social: (document.getElementById('profile-social')||{value:''}).value.trim(),
            };
            if (!body.username || !body.email){
                notify(profileFeedback, 'Username and email are required.', false);
                return;
            }
            const csrf = (document.getElementById('csrf_token_profile')||{}).value;
            const result = await tryPost([
                '/api/update_profile.php',
                '/api/profile/update.php',
                '/api/user/update.php'
            ], body, csrf);
            if (result.ok){
                localStorage.setItem('user_profile', JSON.stringify(body));
                notify(profileFeedback, 'Profile updated!');
            } else {
                // Fallback to local save
                localStorage.setItem('user_profile', JSON.stringify(body));
                notify(profileFeedback, 'Saved locally (offline). Will sync when online.');
            }
            if (window.syncProfilePreview) window.syncProfilePreview();
        });
        document.getElementById('profile-cancel')?.addEventListener('click', ()=>{
            profileForm.reset();
            notify(profileFeedback, 'Changes reverted.');
            loadProfile();
        });

        // Password strength meter
        const pw = document.getElementById('new-password');
        const pwBar = document.getElementById('pw-bar');
        function scorePassword(s){
            let score = 0;
            if (!s) return 0;
            const letters = {};
            for (let i=0; i<s.length; i++){ letters[s[i]] = (letters[s[i]]||0) + 1; score += 5.0/letters[s[i]]; }
            const variations = { digits: /\d/.test(s), lower: /[a-z]/.test(s), upper: /[A-Z]/.test(s), nonWords: /[^\w]/.test(s) };
            let variationCount = 0; for (let k in variations){ variationCount += variations[k] ? 1 : 0; }
            score += (variationCount-1) * 10;
            return parseInt(score);
        }
        pw?.addEventListener('input', (e)=>{
            const sc = Math.max(0, Math.min(100, scorePassword(e.target.value)));
            if (pwBar) pwBar.style.width = sc + '%';
        });

        // Change Password
        passwordForm?.addEventListener('submit', async (e)=>{
            e.preventDefault();
            notify(passwordFeedback, 'Updating password...');
            const oldp = document.getElementById('old-password').value;
            const newp = document.getElementById('new-password').value;
            const conf = document.getElementById('confirm-password').value;
            if (newp !== conf){ notify(passwordFeedback, 'Passwords do not match.', false); return; }
            if ((scorePassword(newp)||0) < 40){ notify(passwordFeedback, 'Password too weak. Use more characters and symbols.', false); return; }
            const csrf = (document.getElementById('csrf_token_password')||{}).value;
            const result = await tryPost([
                '/api/change_password.php',
                '/api/user/change_password.php'
            ], { old_password: oldp, new_password: newp }, csrf);
            if (result.ok){
                notify(passwordFeedback, 'Password updated!');
                passwordForm.reset();
                if (pwBar) pwBar.style.width = '0%';
            } else {
                notify(passwordFeedback, 'Unable to update password right now.', false);
            }
        });

        // ===== COMPREHENSIVE SETTINGS FUNCTIONALITY =====
        
        // Settings navigation
        function initSettingsNavigation() {
            const navButtons = document.querySelectorAll('.settings-nav-btn');
            const categories = document.querySelectorAll('.settings-category');
            
            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetCategory = button.getAttribute('data-category');
                    
                    // Remove active class from all buttons and categories
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    categories.forEach(cat => cat.classList.remove('active'));
                    
                    // Add active class to clicked button and corresponding category
                    button.classList.add('active');
                    document.getElementById(`${targetCategory}-settings`).classList.add('active');
                });
            });
        }
        
        // Theme application functions
        function applyTheme(theme) {
            const t = theme === 'light' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', t);
        }
        
        function applyAccent(color) {
            const c = /^#([0-9a-f]{3}){1,2}$/i.test(color) ? color : '#4fc3f7';
            document.documentElement.style.setProperty('--accent', c);
        }
        
        function applyReducedMotion(on) {
            const root = document.documentElement;
            if (on) {
                root.style.setProperty('--motion', '0');
                const styleId = 'reduced-motion-style';
                let st = document.getElementById(styleId);
                if (!st) {
                    st = document.createElement('style');
                    st.id = styleId;
                    st.textContent = '*{transition:none !important; animation:none !important}';
                    document.head.appendChild(st);
                }
            } else {
                const st = document.getElementById('reduced-motion-style');
                if (st) st.remove();
            }
        }
        
        function applyFontSize(size) {
            const sizes = {
                'small': '14px',
                'medium': '16px',
                'large': '18px',
                'extra large': '20px'
            };
            document.documentElement.style.setProperty('--font-size', sizes[size] || '16px');
        }
        
        function applyAnimations(enabled) {
            if (enabled) {
                document.body.classList.remove('animations-disabled');
            } else {
                document.body.classList.add('animations-disabled');
            }
        }
        
        function applyBackgroundEffects(enabled) {
            if (enabled) {
                document.body.classList.add('background-effects-enabled');
            } else {
                document.body.classList.remove('background-effects-enabled');
            }
        }
        
        function applySidebarPosition(position) {
            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                if (position === 'right') {
                    sidebar.style.order = '2';
                    sidebar.style.marginLeft = 'auto';
                } else {
                    sidebar.style.order = '0';
                    sidebar.style.marginLeft = '0';
                }
            }
        }
        
        function applyCompactMode(enabled) {
            if (enabled) {
                document.body.classList.add('compact-mode');
            } else {
                document.body.classList.remove('compact-mode');
            }
        }
        
        // Load all settings
        function loadSettings() {
            const saved = JSON.parse(localStorage.getItem('user_settings') || '{}');
            
            // Appearance settings
            if (saved.theme) {
                const themeButtons = document.querySelectorAll('.theme-option');
                themeButtons.forEach(btn => {
                    btn.classList.toggle('active', btn.getAttribute('data-theme') === saved.theme);
                });
                applyTheme(saved.theme);
            }
            
            if (saved.accent_color) {
                const colorPicker = document.querySelector('.color-picker');
                if (colorPicker) {
                    colorPicker.value = saved.accent_color;
                    applyAccent(saved.accent_color);
                }
            }
            
            if (saved.font_size) {
                const fontSizeSelect = document.querySelector('select');
                if (fontSizeSelect) {
                    fontSizeSelect.value = saved.font_size;
                    applyFontSize(saved.font_size);
                }
            }
            
            if (typeof saved.animations === 'boolean') {
                const animationsSwitch = document.querySelector('input[type="checkbox"]');
                if (animationsSwitch) {
                    animationsSwitch.checked = saved.animations;
                    applyAnimations(saved.animations);
                }
            }
            
            if (typeof saved.background_effects === 'boolean') {
                const bgEffectsSwitch = document.querySelectorAll('input[type="checkbox"]')[1];
                if (bgEffectsSwitch) {
                    bgEffectsSwitch.checked = saved.background_effects;
                    applyBackgroundEffects(saved.background_effects);
                }
            }
            
            if (typeof saved.reduce_motion === 'boolean') {
                const reduceMotionSwitch = document.querySelectorAll('input[type="checkbox"]')[2];
                if (reduceMotionSwitch) {
                    reduceMotionSwitch.checked = saved.reduce_motion;
                    applyReducedMotion(saved.reduce_motion);
                }
            }
            
            if (saved.sidebar_position) {
                const sidebarSelect = document.querySelectorAll('select')[1];
                if (sidebarSelect) {
                    sidebarSelect.value = saved.sidebar_position;
                    applySidebarPosition(saved.sidebar_position);
                }
            }
            
            if (typeof saved.compact_mode === 'boolean') {
                const compactSwitch = document.querySelectorAll('input[type="checkbox"]')[3];
                if (compactSwitch) {
                    compactSwitch.checked = saved.compact_mode;
                    applyCompactMode(saved.compact_mode);
                }
            }
            
            // Account settings
            if (saved.display_name) {
                const displayNameInput = document.querySelector('input[type="text"]');
                if (displayNameInput) {
                    displayNameInput.value = saved.display_name;
                }
            }
            
            if (saved.email) {
                const emailInput = document.querySelectorAll('input[type="text"]')[1];
                if (emailInput) {
                    emailInput.value = saved.email;
                }
            }
            
            // Privacy settings
            if (typeof saved.profile_visibility === 'boolean') {
                const profileSwitch = document.querySelectorAll('#privacy-settings input[type="checkbox"]')[0];
                if (profileSwitch) {
                    profileSwitch.checked = saved.profile_visibility;
                }
            }
            
            if (typeof saved.activity_status === 'boolean') {
                const activitySwitch = document.querySelectorAll('#privacy-settings input[type="checkbox"]')[1];
                if (activitySwitch) {
                    activitySwitch.checked = saved.activity_status;
                }
            }
            
            if (typeof saved.data_collection === 'boolean') {
                const dataSwitch = document.querySelectorAll('#privacy-settings input[type="checkbox"]')[2];
                if (dataSwitch) {
                    dataSwitch.checked = saved.data_collection;
                }
            }
            
            // Notification settings
            if (typeof saved.email_notifications === 'boolean') {
                const emailNotifSwitch = document.querySelectorAll('#notifications-settings input[type="checkbox"]')[0];
                if (emailNotifSwitch) {
                    emailNotifSwitch.checked = saved.email_notifications;
                }
            }
            
            if (typeof saved.push_notifications === 'boolean') {
                const pushNotifSwitch = document.querySelectorAll('#notifications-settings input[type="checkbox"]')[1];
                if (pushNotifSwitch) {
                    pushNotifSwitch.checked = saved.push_notifications;
                }
            }
            
            if (typeof saved.sound_alerts === 'boolean') {
                const soundSwitch = document.querySelectorAll('#notifications-settings input[type="checkbox"]')[2];
                if (soundSwitch) {
                    soundSwitch.checked = saved.sound_alerts;
                }
            }
            
            // Gaming settings
            if (typeof saved.game_notifications === 'boolean') {
                const gameNotifSwitch = document.querySelectorAll('#gaming-settings input[type="checkbox"]')[0];
                if (gameNotifSwitch) {
                    gameNotifSwitch.checked = saved.game_notifications;
                }
            }
            
            if (typeof saved.auto_match === 'boolean') {
                const autoMatchSwitch = document.querySelectorAll('#gaming-settings input[type="checkbox"]')[1];
                if (autoMatchSwitch) {
                    autoMatchSwitch.checked = saved.auto_match;
                }
            }
            
            if (saved.voice_chat_volume) {
                const volumeSlider = document.querySelector('#gaming-settings input[type="range"]');
                if (volumeSlider) {
                    volumeSlider.value = saved.voice_chat_volume;
                }
            }
            
            // Advanced settings
            if (typeof saved.debug_mode === 'boolean') {
                const debugSwitch = document.querySelectorAll('#advanced-settings input[type="checkbox"]')[0];
                if (debugSwitch) {
                    debugSwitch.checked = saved.debug_mode;
                }
            }
            
            if (typeof saved.beta_features === 'boolean') {
                const betaSwitch = document.querySelectorAll('#advanced-settings input[type="checkbox"]')[1];
                if (betaSwitch) {
                    betaSwitch.checked = saved.beta_features;
                }
            }
        }
        
        // Save all settings
        function saveSettings() {
            const settings = {
                // Appearance settings
                theme: document.querySelector('.theme-option.active')?.getAttribute('data-theme') || 'dark',
                accent_color: document.querySelector('.color-picker')?.value || '#4fc3f7',
                font_size: document.querySelector('select')?.value || 'medium',
                animations: document.querySelector('input[type="checkbox"]')?.checked || true,
                background_effects: document.querySelectorAll('input[type="checkbox"]')[1]?.checked || true,
                reduce_motion: document.querySelectorAll('input[type="checkbox"]')[2]?.checked || false,
                sidebar_position: document.querySelectorAll('select')[1]?.value || 'left',
                compact_mode: document.querySelectorAll('input[type="checkbox"]')[3]?.checked || false,
                
                // Account settings
                display_name: document.querySelector('input[type="text"]')?.value || '',
                email: document.querySelectorAll('input[type="text"]')[1]?.value || '',
                
                // Privacy settings
                profile_visibility: document.querySelectorAll('#privacy-settings input[type="checkbox"]')[0]?.checked || true,
                activity_status: document.querySelectorAll('#privacy-settings input[type="checkbox"]')[1]?.checked || true,
                data_collection: document.querySelectorAll('#privacy-settings input[type="checkbox"]')[2]?.checked || false,
                
                // Notification settings
                email_notifications: document.querySelectorAll('#notifications-settings input[type="checkbox"]')[0]?.checked || true,
                push_notifications: document.querySelectorAll('#notifications-settings input[type="checkbox"]')[1]?.checked || true,
                sound_alerts: document.querySelectorAll('#notifications-settings input[type="checkbox"]')[2]?.checked || true,
                
                // Gaming settings
                game_notifications: document.querySelectorAll('#gaming-settings input[type="checkbox"]')[0]?.checked || true,
                auto_match: document.querySelectorAll('#gaming-settings input[type="checkbox"]')[1]?.checked || false,
                voice_chat_volume: document.querySelector('#gaming-settings input[type="range"]')?.value || 50,
                
                // Advanced settings
                debug_mode: document.querySelectorAll('#advanced-settings input[type="checkbox"]')[0]?.checked || false,
                beta_features: document.querySelectorAll('#advanced-settings input[type="checkbox"]')[1]?.checked || false
            };
            
            // Apply settings immediately
            applyTheme(settings.theme);
            applyAccent(settings.accent_color);
            applyReducedMotion(settings.reduce_motion);
            applyFontSize(settings.font_size);
            applyAnimations(settings.animations);
            applyBackgroundEffects(settings.background_effects);
            applySidebarPosition(settings.sidebar_position);
            applyCompactMode(settings.compact_mode);
            
            // Save to localStorage
            localStorage.setItem('user_settings', JSON.stringify(settings));
            
            // Show success message
            showNotification('Settings saved successfully!', 'success');
            
            return settings;
        }
        
        // Reset to defaults
        function resetToDefaults() {
            const defaults = {
                theme: 'dark',
                accent_color: '#4fc3f7',
                font_size: 'medium',
                animations: true,
                background_effects: true,
                reduce_motion: false,
                sidebar_position: 'left',
                compact_mode: false,
                profile_visibility: true,
                activity_status: true,
                data_collection: false,
                email_notifications: true,
                push_notifications: true,
                sound_alerts: true,
                game_notifications: true,
                auto_match: false,
                voice_chat_volume: 50,
                debug_mode: false,
                beta_features: false
            };
            
            localStorage.setItem('user_settings', JSON.stringify(defaults));
            loadSettings();
            showNotification('Settings reset to defaults', 'info');
        }
        
        // Export settings
        function exportSettings() {
            const settings = JSON.parse(localStorage.getItem('user_settings') || '{}');
            const dataStr = JSON.stringify(settings, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'dashboard-settings.json';
            link.click();
            
            showNotification('Settings exported successfully', 'success');
        }
        
        // Import settings
        function importSettings() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const settings = JSON.parse(e.target.result);
                            localStorage.setItem('user_settings', JSON.stringify(settings));
                            loadSettings();
                            showNotification('Settings imported successfully', 'success');
                        } catch (error) {
                            showNotification('Error importing settings: Invalid file format', 'error');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            
            input.click();
        }
        
        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                animation: slideIn 0.3s ease;
                background: ${type === 'success' ? '#4caf50' : type === 'error' ? '#f44336' : '#2196f3'};
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        // Live preview updates
        function initLivePreview() {
            // Theme buttons
            document.querySelectorAll('.theme-option').forEach(button => {
                button.addEventListener('click', () => {
                    const theme = button.getAttribute('data-theme');
                    applyTheme(theme);
                });
            });
            
            // Color picker
            const colorPicker = document.querySelector('.color-picker');
            if (colorPicker) {
                colorPicker.addEventListener('input', (e) => {
                    applyAccent(e.target.value);
                });
            }
            
            // Font size select
            const fontSizeSelect = document.querySelector('select');
            if (fontSizeSelect) {
                fontSizeSelect.addEventListener('change', (e) => {
                    applyFontSize(e.target.value);
                });
            }
            
            // Animation switches
            const animationsSwitch = document.querySelector('input[type="checkbox"]');
            if (animationsSwitch) {
                animationsSwitch.addEventListener('change', (e) => {
                    applyAnimations(e.target.checked);
                });
            }
            
            const bgEffectsSwitch = document.querySelectorAll('input[type="checkbox"]')[1];
            if (bgEffectsSwitch) {
                bgEffectsSwitch.addEventListener('change', (e) => {
                    applyBackgroundEffects(e.target.checked);
                });
            }
            
            const reduceMotionSwitch = document.querySelectorAll('input[type="checkbox"]')[2];
            if (reduceMotionSwitch) {
                reduceMotionSwitch.addEventListener('change', (e) => {
                    applyReducedMotion(e.target.checked);
                });
            }
            
            // Sidebar position
            const sidebarSelect = document.querySelectorAll('select')[1];
            if (sidebarSelect) {
                sidebarSelect.addEventListener('change', (e) => {
                    applySidebarPosition(e.target.value);
                });
            }
            
            // Compact mode
            const compactSwitch = document.querySelectorAll('input[type="checkbox"]')[3];
            if (compactSwitch) {
                compactSwitch.addEventListener('change', (e) => {
                    applyCompactMode(e.target.checked);
                });
            }
        }
        
        // Initialize all settings functionality
        if (typeof document !== 'undefined' && document.addEventListener) {
            document.addEventListener('DOMContentLoaded', () => {
            initSettingsNavigation();
            loadSettings();
            initLivePreview();
            
            // Save button
            const saveBtn = document.getElementById('save-settings-btn');
            if (saveBtn) {
                saveBtn.addEventListener('click', saveSettings);
            }
            
            // Reset button
            const resetBtn = document.getElementById('reset-settings-btn');
            if (resetBtn) {
                resetBtn.addEventListener('click', resetToDefaults);
            }
            
            // Export button
            const exportBtn = document.querySelector('#advanced-settings .btn-secondary');
            if (exportBtn && exportBtn.textContent.toLowerCase().includes('export')) {
                exportBtn.addEventListener('click', exportSettings);
            }
            
            // Import button
            const importBtn = document.querySelectorAll('#advanced-settings .btn-secondary')[1];
            if (importBtn && importBtn.textContent.toLowerCase().includes('import')) {
                importBtn.addEventListener('click', importSettings);
            }
            
            // Reset all button
            const resetAllBtn = document.querySelector('#advanced-settings .btn-warning');
            if (resetAllBtn) {
                resetAllBtn.addEventListener('click', resetToDefaults);
            }
            });
        }
        
        // Add CSS animations for notifications
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            
            .animations-disabled * {
                transition: none !important;
                animation: none !important;
            }
            
            .compact-mode {
                --spacing-factor: 0.8;
            }
            
            .background-effects-enabled::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(45deg, rgba(79, 195, 247, 0.1), rgba(41, 182, 246, 0.1));
                pointer-events: none;
                z-index: -1;
                animation: gradientShift 10s ease infinite;
            }
            
            @keyframes gradientShift {
                0%, 100% { transform: translateX(0) translateY(0); }
                33% { transform: translateX(-20px) translateY(-20px); }
                66% { transform: translateX(20px) translateY(20px); }
            }
        `;
        document.head.appendChild(style);

        // Profile preview live updates
        (function(){
            const disp = document.getElementById('profile-displayname');
            const user = document.getElementById('profile-username');
            const bio = document.getElementById('profile-bio');
            const social = document.getElementById('profile-social');
            const link = document.getElementById('preview-link');
            const nameEl = document.getElementById('preview-name');
            const userEl = document.getElementById('preview-username');
            const bioEl = document.getElementById('preview-bio');
            const pImg = document.getElementById('preview-avatar');
            const pFallback = document.getElementById('preview-fallback');
            function setAvatar(url){
                if (pImg && pFallback) {
                    if (url){ 
                        pImg.src = url; 
                        pImg.style.display='block'; 
                        pFallback.style.display='none'; 
                    } else { 
                        pImg.src=''; 
                        pImg.style.display='none'; 
                        pFallback.style.display='block'; 
                    }
                }
            }
            function sync(){
                if (nameEl) nameEl.textContent = disp?.value?.trim() || 'Your Name';
                if (userEl) userEl.textContent = '@' + (user?.value?.trim() || 'username');
                if (bioEl) bioEl.textContent = bio?.value?.trim() || 'Write a short bio to introduce yourself.';
                const s = social?.value?.trim();
                if (s && link) { 
                    link.style.display='inline'; 
                    link.href = s; 
                    try { link.textContent = new URL(s).host; } catch { link.textContent = s; } 
                } else if (link) { 
                    link.style.display='none'; 
                    link.href='#'; 
                    link.textContent=''; 
                }
                const av = (document.getElementById('profile-avatar')||{value:''}).value.trim();
                setAvatar(av);
            }
            ['input','change'].forEach(ev=>{
                disp?.addEventListener(ev, sync);
                user?.addEventListener(ev, sync);
                bio?.addEventListener(ev, sync);
                social?.addEventListener(ev, sync);
                document.getElementById('profile-avatar')?.addEventListener(ev, sync);
            });
            // Expose for load/save triggers
            window.syncProfilePreview = sync;
            // Initial sync after loadProfile fills values (in case it hasn't yet, this is harmless)
            setTimeout(sync, 0);
        })();
        // Logout button logic
        const logoutBtn = document.querySelector('.menu-link[href="../index.html"]');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                // Simulate session clear
                localStorage.clear();
                sessionStorage.clear();
                document.cookie = '';
                window.location.href = '../index.html';
            });
        }
        // Download animation
        function showDownloadAnimation(text) {
            const anim = document.createElement('div');
            anim.style.position = 'fixed';
            anim.style.top = '0';
            anim.style.left = '0';
            anim.style.width = '100vw';
            anim.style.height = '100vh';
            anim.style.background = 'rgba(10,20,40,0.7)';
            anim.style.zIndex = '9999';
            anim.style.display = 'flex';
            anim.style.alignItems = 'center';
            anim.style.justifyContent = 'center';
            anim.innerHTML = `<div style="background:#1e2940; border-radius:16px; padding:28px 22px; max-width:360px; margin:auto; box-shadow:0 8px 32px rgba(33,150,243,0.18); text-align:center;">
                <div style='color:#4fc3f7; font-size:1.1rem; margin-bottom:12px;'>${text}</div>
                <div style='height:10px; background:#102033; border-radius:999px; overflow:hidden;'>
                  <div id='dl-progress' style='height:100%; width:0%; background:linear-gradient(90deg,#4fc3f7,#2196f3); box-shadow:0 0 12px #4fc3f7AA inset; transition:width .25s ease;'></div>
                </div>
                <div style='color:#b0b0b0; margin-top:10px;'>Preparing your download...</div>
            </div>`;
            document.body.appendChild(anim);
            // Fake progress then remove
            let p = 0;
            const bar = anim.querySelector('#dl-progress');
            const timer = setInterval(() => {
                p = Math.min(100, p + 20);
                if (bar) bar.style.width = p + '%';
                if (p >= 100) {
                    clearInterval(timer);
                    setTimeout(() => anim.remove(), 300);
                }
            }, 250);
        }
        // Bell button opens notifications section
        const notificationsBtn = document.getElementById('notificationsBtn');
        notificationsBtn.addEventListener('click', function() {
            document.querySelectorAll('.menu-link').forEach(l => l.classList.remove('active'));
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            // Highlight sidebar notifications link
            const sidebarNotif = document.querySelector('.menu-link[data-section="notifications"]');
            if (sidebarNotif) sidebarNotif.classList.add('active');
            // Show notifications section
            const notifSection = document.getElementById('notifications-section');
            if (notifSection) notifSection.classList.add('active');
            // Update page title
            document.getElementById('pageTitle').textContent = 'Notifications';
        });
        // Profile button opens profile section
        const profileBtn = document.getElementById('profileBtn');
        profileBtn.addEventListener('click', function() {
            document.querySelectorAll('.menu-link').forEach(l => l.classList.remove('active'));
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            const sidebarProfile = document.querySelector('.menu-link[data-section="profile"]');
            if (sidebarProfile) sidebarProfile.classList.add('active');
            const profileSection = document.getElementById('profile-section');
            if (profileSection) profileSection.classList.add('active');
            document.getElementById('pageTitle').textContent = 'Profile';
        });

        // Profile View Toggle (Roblox | Forum)
        (function() {
            function initProfileViewToggle() {
                const section = document.getElementById('profile-section');
                if (!section) return;
                const STORAGE_KEY = 'profile_view';
                function applyProfileView(view){
                    const v = (view === 'roblox') ? 'roblox' : 'forum';
                    try { localStorage.setItem(STORAGE_KEY, v); } catch(e){}
                    section.classList.toggle('profile-roblox', v === 'roblox');
                    section.classList.toggle('profile-forum', v === 'forum');
                    document.querySelectorAll('.profile-view-btn').forEach(btn => {
                        btn.classList.toggle('active', btn.getAttribute('data-view') === v);
                    });
                }
                // Bind buttons
                document.querySelectorAll('.profile-view-btn').forEach(btn => {
                    btn.addEventListener('click', () => applyProfileView(btn.getAttribute('data-view')));
                });
                // Apply saved view or default to 'forum'
                const saved = (function(){ try { return localStorage.getItem(STORAGE_KEY) || 'forum'; } catch(e){ return 'forum'; } })();
                applyProfileView(saved);
            }
            
            // Try to initialize immediately, or wait for DOMContentLoaded if needed
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initProfileViewToggle);
            } else {
                initProfileViewToggle();
            }
        })();

        // Command Palette (Ctrl/Cmd+K) for quick navigation
            const palette = document.createElement('div');
            palette.id = 'cmdk';
            palette.style.cssText = 'display:none; position:fixed; inset:0; z-index:10000; background:rgba(10,20,40,.6); align-items:flex-start; justify-content:center; padding-top:10vh;';
            palette.innerHTML = `
              <div style="width:560px; max-width:90vw; background:#121a2b; border:1px solid #24314d; border-radius:14px; overflow:hidden; box-shadow:0 12px 40px rgba(33,150,243,.25)">
                <div style="display:flex; align-items:center; gap:8px; padding:10px 12px; border-bottom:1px solid #1a253c;">
                  <span class="iconify" data-icon="mdi:magnify" style="color:#4fc3f7"></span>
                  <input id="cmdk-input" type="text" placeholder="Type a command... (e.g., download, servers, profile)" style="flex:1; background:transparent; border:none; outline:none; color:#e0e0e0; font-size:14px;" />
                  <span style="color:#6ea9c7; font-size:12px; opacity:.8;">Esc</span>
                </div>
                <div id="cmdk-list" style="max-height:50vh; overflow:auto;">
                </div>
              </div>`;
            document.body.appendChild(palette);

            const entries = [
              {label:'Dashboard', key:'dashboard'},
              {label:'Download', key:'download'},
              {label:'Files', key:'files'},
              {label:'Games', key:'games'},
              {label:'Servers', key:'servers'},
              {label:'Invites', key:'invites'},
              {label:'Notifications', key:'notifications'},
              {label:'Profile', key:'profile'},
              {label:'Settings', key:'settings'}
            ];
            function renderList(filter=''){
              const list = document.getElementById('cmdk-list');
              const q = filter.trim().toLowerCase();
              const filtered = entries.filter(e => e.label.toLowerCase().includes(q) || e.key.includes(q));
              list.innerHTML = filtered.map((e,i)=>`<div class="cmdk-item${i===0?' selected':''}" data-key="${e.key}" style="display:flex; gap:10px; padding:10px 12px; cursor:pointer; align-items:center; background:${i===0?'#0f1524':'transparent'};"> <span class="iconify" data-icon="mdi:chevron-right" style="color:#4fc3f7"></span> <div style="color:#d5e7f4">${e.label}</div></div>`).join('');
            }
            function openPalette(){ palette.style.display='flex'; const input=document.getElementById('cmdk-input'); renderList(''); setTimeout(()=>input.focus(),0); }
            function closePalette(){ palette.style.display='none'; }
            function activate(key){
              closePalette();
              const link = document.querySelector(`.menu-link[data-section="${key}"]`);
              if (link) link.click();
            }
            document.addEventListener('keydown', (e)=>{
              const metaK = (e.ctrlKey || e.metaKey) && (e.key.toLowerCase()==='k');
              if (metaK){ e.preventDefault(); openPalette(); }
              if (palette.style.display!=='none'){
                if (e.key==='Escape'){ closePalette(); }
                if (e.key==='Enter'){
                  const selected = document.querySelector('#cmdk-list .cmdk-item.selected');
                  if (selected) activate(selected.getAttribute('data-key'));
                }
                if (e.key==='ArrowDown' || e.key==='Tab'){
                  e.preventDefault();
                  const items=[...document.querySelectorAll('#cmdk-list .cmdk-item')];
                  const idx=items.findIndex(i=>i.classList.contains('selected'));
                  items.forEach(i=>i.classList.remove('selected'));
                  const next=items[Math.min(items.length-1, idx+1)];
                  if (next) next.classList.add('selected');
                }
                if (e.key==='ArrowUp'){
                  e.preventDefault();
                  const items=[...document.querySelectorAll('#cmdk-list .cmdk-item')];
                  const idx=items.findIndex(i=>i.classList.contains('selected'));
                  items.forEach(i=>i.classList.remove('selected'));
                  const prev=items[Math.max(0, idx-1)];
                  if (prev) prev.classList.add('selected');
                }
              }
            });
            document.addEventListener('input', (e)=>{
              if (e.target && e.target.id==='cmdk-input') renderList(e.target.value);
            });
            document.getElementById('cmdk-list').addEventListener('click', (e)=>{
              const el = e.target.closest('.cmdk-item');
              if (el) activate(el.getAttribute('data-key'));
            });
    </script>
    <script>
        // Live Server Status polling and rendering
        // Check if document is available and add event listener safely
        if (typeof document !== 'undefined' && document.addEventListener) {
            document.addEventListener('DOMContentLoaded', function(){
            const STATUS_CLASSES = ['online','offline','maintenance'];
            const mapKeyToDom = {
                main: { ind: 'status-main-ind', details: 'status-main-details', label: 'Main Server' },
                game: { ind: 'status-game-ind', details: 'status-game-details', label: 'Game Server' },
                file: { ind: 'status-file-ind', details: 'status-file-details', label: 'File Server' },
            };
            function setIndicator(id, status){
                const el = document.getElementById(id);
                if (!el) return;
                STATUS_CLASSES.forEach(c=>el.classList.remove(c));
                if (status && STATUS_CLASSES.includes(status)) el.classList.add(status);
            }
            function setDetails(id, text){
                const el = document.getElementById(id);
                if (el) el.textContent = text;
            }
            async function fetchStatus(){
                try {
                    const res = await fetch('/api/health.php', { cache: 'no-store', credentials: 'include' });
                    const data = await res.json();
                    const services = data && data.services ? data.services : {};
                    for (const key of Object.keys(mapKeyToDom)){
                        const cfg = mapKeyToDom[key];
                        const svc = services[key] || { status: 'offline', details: 'No data' };
                        const status = (svc.status||'offline').toLowerCase();
                        setIndicator(cfg.ind, status);
                        let detail = '';
                        if (status === 'online'){
                            const latency = (svc.latency_ms!=null) ? `~${svc.latency_ms} ms` : null;
                            const players = (typeof svc.players === 'number' && svc.players > 0) ? `${svc.players} players` : null;
                            detail = ['Online', latency, players].filter(Boolean).join(' Â· ');
                            if (!detail) detail = 'Online';
                        } else if (status === 'maintenance') {
                            detail = 'Maintenance';
                        } else {
                            detail = 'Offline';
                        }
                        if (svc.details && status !== 'online') {
                            detail += ` Â· ${svc.details}`;
                        }
                        setDetails(cfg.details, detail);
                    }
                } catch (e){
                    // On error mark all as offline (without overriding explicit maintenance)
                    Object.keys(mapKeyToDom).forEach(key=>{
                        const cfg = mapKeyToDom[key];
                        const ind = document.getElementById(cfg.ind);
                        if (ind && !ind.classList.contains('maintenance')){
                            setIndicator(cfg.ind, 'offline');
                            setDetails(cfg.details, 'Offline Â· Unable to reach status API');
                        }
                    });
                }
            }
            // Check if document is available and add event listener safely
            if (typeof document !== 'undefined' && document.addEventListener) {
                document.addEventListener('DOMContentLoaded', ()=>{
                    // Initialize as checking state
                    fetchStatus();
                    // Poll every 15 seconds
                    setInterval(fetchStatus, 15000);
                });
            } else {
                // Fallback: try to initialize immediately
                setTimeout(() => {
                    fetchStatus();
                    setInterval(fetchStatus, 15000);
                }, 100);
            }
        });
        } else {
            // Fallback: try to initialize immediately
            setTimeout(() => {
                // Initialize status checking
                const STATUS_CLASSES = ['online','offline','maintenance'];
                const mapKeyToDom = {
                    main: { ind: 'status-main-ind', details: 'status-main-details', label: 'Main Server' },
                    game: { ind: 'status-game-ind', details: 'status-game-details', label: 'Game Server' },
                    file: { ind: 'status-file-ind', details: 'status-file-details', label: 'File Server' },
                };
                function setIndicator(id, status){
                    const el = document.getElementById(id);
                    if (!el) return;
                    STATUS_CLASSES.forEach(c=>el.classList.remove(c));
                    if (status && STATUS_CLASSES.includes(status)) el.classList.add(status);
                }
                function setDetails(id, text){
                    const el = document.getElementById(id);
                    if (el) el.textContent = text;
                }
                async function fetchStatus(){
                    try {
                        const res = await fetch('/api/health.php', { cache: 'no-store', credentials: 'include' });
                        const data = await res.json();
                        const services = data && data.services ? data.services : {};
                        for (const key of Object.keys(mapKeyToDom)){
                            const cfg = mapKeyToDom[key];
                            const svc = services[key] || { status: 'offline', details: 'No data' };
                            const status = (svc.status||'offline').toLowerCase();
                            setIndicator(cfg.ind, status);
                            let detail = '';
                            if (status === 'online'){
                                const latency = (svc.latency_ms!=null) ? `~${svc.latency_ms} ms` : null;
                                const players = (typeof svc.players === 'number' && svc.players > 0) ? `${svc.players} players` : null;
                                detail = ['Online', latency, players].filter(Boolean).join(' Â· ');
                                if (!detail) detail = 'Online';
                            } else if (status === 'maintenance') {
                                detail = 'Maintenance';
                            } else {
                                detail = 'Offline';
                            }
                            if (svc.details && status !== 'online') {
                                detail += ` Â· ${svc.details}`;
                            }
                            setDetails(cfg.details, detail);
                        }
                    } catch (e){
                        // On error mark all as offline (without overriding explicit maintenance)
                        Object.keys(mapKeyToDom).forEach(key=>{
                            const cfg = mapKeyToDom[key];
                            const ind = document.getElementById(cfg.ind);
                            if (ind && !ind.classList.contains('maintenance')){
                                setIndicator(cfg.ind, 'offline');
                                setDetails(cfg.details, 'Offline Â· Unable to reach status API');
                            }
                        });
                    }
                }
                fetchStatus();
                setInterval(fetchStatus, 15000);
            }, 100);
        }
    </script>
    <script>
        // Fetch CSRF token and set it in all related forms
        const fetchCsrfToken = async () => {
            try {
                const res = await fetch(`${API_BASE}/api/csrf_token.php`, {
                    credentials: 'include',
                    cache: 'no-store'
                });
                const data = await res.json();
                if (data && data.csrf_token) {
                    const tok = data.csrf_token;
                    const s = document.getElementById('csrf_token_settings');
                    const p = document.getElementById('csrf_token_profile');
                    const pw = document.getElementById('csrf_token_password');
                    if (s) s.value = tok;
                    if (p) p.value = tok;
                    if (pw) pw.value = tok;
                }
            } catch (e) {
                console.error('Failed to load CSRF token', e);
                setTimeout(fetchCsrfToken, 2000);
            }
        };
        fetchCsrfToken();

        // Delete account
        (function(){
            const btn = document.getElementById('delete-account-btn');
            if (!btn) return;
            btn.addEventListener('click', async ()=>{
                if (!confirm('Are you sure you want to permanently delete your account? This cannot be undone.')) return;
                btn.disabled = true;
                try {
                    const csrf = (document.getElementById('csrf_token_settings')||{}).value;
                    const res = await fetch(`${API_BASE}/api/delete_account.php`, {
                        method: 'POST',
                        headers: (function(){
                            const token = localStorage.getItem('auth_token') || localStorage.getItem('token');
                            const h = { 'Content-Type': 'application/json' };
                            if (token) h['Authorization'] = `Bearer ${token}`;
                            if (csrf) h['X-CSRF-Token'] = csrf;
                            return h;
                        })(),
                        credentials: 'include',
                        body: JSON.stringify({ confirm: true })
                    });
                    if (res.ok){
                        alert('Account deleted. Sorry to see you go.');
                        localStorage.clear(); sessionStorage.clear();
                        window.location.href = '../index.html';
                    } else {
                        alert('Unable to delete account right now. Please try again later.');
                        btn.disabled = false;
                    }
                } catch(e){
                    alert('Network error. Please try again later.');
                    btn.disabled = false;
                }
            });
        })();

        // ===== COMPREHENSIVE PROFILE FUNCTIONALITY =====
        document.addEventListener('DOMContentLoaded', function() {
            // Profile Navigation
            function initProfileNavigation() {
                const navButtons = document.querySelectorAll('.profile-nav-btn');
                const sections = document.querySelectorAll('.profile-section');
                
                navButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const targetSection = button.getAttribute('data-section');
                        
                        // Remove active class from all buttons and sections
                        navButtons.forEach(btn => btn.classList.remove('active'));
                        sections.forEach(sec => sec.classList.remove('active'));
                        
                        // Add active class to clicked button and corresponding section
                        button.classList.add('active');
                        document.getElementById(`${targetSection}-section`).classList.add('active');
                    });
                });
            }

            // Personal Information Editing
            function initPersonalInfoEditing() {
                const editBtn = document.getElementById('editPersonalBtn');
                const cancelBtn = document.getElementById('cancelPersonalBtn');
                const saveBtn = document.getElementById('savePersonalBtn');
                const actionsDiv = document.getElementById('personalActions');
                
                if (!editBtn) return;
                
                editBtn.addEventListener('click', () => {
                    // Show edit inputs and hide display values
                    document.querySelectorAll('.info-value-display').forEach(display => {
                        display.style.display = 'none';
                    });
                    document.querySelectorAll('.info-value-edit').forEach(input => {
                        input.style.display = 'block';
                    });
                    actionsDiv.style.display = 'flex';
                    editBtn.style.display = 'none';
                });
                
                cancelBtn.addEventListener('click', () => {
                    // Hide edit inputs and show display values
                    document.querySelectorAll('.info-value-display').forEach(display => {
                        display.style.display = 'block';
                    });
                    document.querySelectorAll('.info-value-edit').forEach(input => {
                        input.style.display = 'none';
                    });
                    actionsDiv.style.display = 'none';
                    editBtn.style.display = 'inline-flex';
                });
                
                saveBtn.addEventListener('click', () => {
                    // Save the changes
                    const displayName = document.getElementById('displayNameEdit').value;
                    const username = document.getElementById('usernameEdit').value;
                    const email = document.getElementById('emailEdit').value;
                    const bio = document.getElementById('bioEdit').value;
                    const location = document.getElementById('locationEdit').value;
                    const timezone = document.getElementById('timezoneEdit').value;
                    
                    // Update display values
                    document.getElementById('displayNameDisplay').textContent = displayName;
                    document.getElementById('usernameDisplay').textContent = '@' + username;
                    document.getElementById('emailDisplay').textContent = email;
                    document.getElementById('bioDisplay').textContent = bio;
                    document.getElementById('locationDisplay').textContent = location;
                    document.getElementById('timezoneDisplay').textContent = timezone;
                    
                    // Update header info
                    document.getElementById('profileDisplayName').textContent = displayName;
                    document.getElementById('profileUsername').textContent = '@' + username;
                    document.getElementById('profileEmail').textContent = email;
                    
                    // Hide edit mode
                    cancelBtn.click();
                    
                    // Show success notification
                    showNotification('Profile updated successfully!', 'success');
                });
            }

            // Avatar Upload - Simplified to only use modal
            function initAvatarUpload() {
                const editAvatarBtn = document.getElementById('editAvatarBtn');

                if (editAvatarBtn) {
                    editAvatarBtn.addEventListener('click', () => {
                        // Open the image upload modal
                        openImageUploadModal();
                    });
                }
            }

            // Security Settings
            function initSecuritySettings() {
                const changePasswordBtn = document.getElementById('changePasswordBtn');
                const twoFactorToggle = document.getElementById('twoFactorToggle');
                const manageSessionsBtn = document.getElementById('manageSessionsBtn');
                const loginHistoryBtn = document.getElementById('loginHistoryBtn');
                
                changePasswordBtn.addEventListener('click', () => {
                    showNotification('Password change feature coming soon!', 'info');
                });
                
                twoFactorToggle.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        showNotification('Two-factor authentication enabled!', 'success');
                    } else {
                        showNotification('Two-factor authentication disabled!', 'warning');
                    }
                });
                
                manageSessionsBtn.addEventListener('click', () => {
                    showNotification('Session management coming soon!', 'info');
                });
                
                loginHistoryBtn.addEventListener('click', () => {
                    showNotification('Login history coming soon!', 'info');
                });
            }

            // Privacy Settings
            function initPrivacySettings() {
                const profileVisibilitySelect = document.getElementById('profileVisibilitySelect');
                const onlineStatusToggle = document.getElementById('onlineStatusToggle');
                const activityStatusToggle = document.getElementById('activityStatusToggle');
                const dataCollectionToggle = document.getElementById('dataCollectionToggle');
                const marketingEmailsToggle = document.getElementById('marketingEmailsToggle');
                
                profileVisibilitySelect.addEventListener('change', (e) => {
                    showNotification(`Profile visibility set to ${e.target.value}`, 'success');
                });
                
                onlineStatusToggle.addEventListener('change', (e) => {
                    showNotification(`Online status ${e.target.checked ? 'enabled' : 'disabled'}`, 'success');
                });
                
                activityStatusToggle.addEventListener('change', (e) => {
                    showNotification(`Activity status ${e.target.checked ? 'enabled' : 'disabled'}`, 'success');
                });
                
                dataCollectionToggle.addEventListener('change', (e) => {
                    showNotification(`Data collection ${e.target.checked ? 'enabled' : 'disabled'}`, 'success');
                });
                
                marketingEmailsToggle.addEventListener('change', (e) => {
                    showNotification(`Marketing emails ${e.target.checked ? 'enabled' : 'disabled'}`, 'success');
                });
            }

            // Preferences Settings
            function initPreferencesSettings() {
                const languageSelect = document.getElementById('languageSelect');
                const dateFormatSelect = document.getElementById('dateFormatSelect');
                const timeFormatSelect = document.getElementById('timeFormatSelect');
                const startPageSelect = document.getElementById('startPageSelect');
                
                languageSelect.addEventListener('change', (e) => {
                    showNotification(`Language changed to ${e.target.options[e.target.selectedIndex].text}`, 'success');
                });
                
                dateFormatSelect.addEventListener('change', (e) => {
                    showNotification(`Date format changed to ${e.target.value}`, 'success');
                });
                
                timeFormatSelect.addEventListener('change', (e) => {
                    showNotification(`Time format changed to ${e.target.value}`, 'success');
                });
                
                startPageSelect.addEventListener('change', (e) => {
                    showNotification(`Start page set to ${e.target.options[e.target.selectedIndex].text}`, 'success');
                });
            }

            // Account Actions
            function initAccountActions() {
                const downloadDataBtn = document.getElementById('downloadDataBtn');
                const deleteAccountBtn = document.getElementById('deleteAccountBtn');
                
                downloadDataBtn.addEventListener('click', () => {
                    showNotification('Preparing your data for download...', 'info');
                    setTimeout(() => {
                        showNotification('Data download started!', 'success');
                    }, 2000);
                });
                
                deleteAccountBtn.addEventListener('click', () => {
                    if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                        showNotification('Account deletion process started...', 'warning');
                    }
                });
            }

            // Notification System
            function showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.innerHTML = `
                    <div class="notification-content">
                        <span class="notification-message">${message}</span>
                        <button class="notification-close">
                            <span class="iconify" data-icon="mdi:close"></span>
                        </button>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Add close functionality
                notification.querySelector('.notification-close').addEventListener('click', () => {
                    notification.remove();
                });
                
                // Auto-remove after 5 seconds
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 5000);
            }

            // Initialize all profile functionality
            function initializeProfile() {
                initProfileNavigation();
                initPersonalInfoEditing();
                initAvatarUpload();
                initSecuritySettings();
                initPrivacySettings();
                initPreferencesSettings();
                initAccountActions();
            }

            // Image Upload Modal
            function initializeImageUploadModal() {
                const modal = document.getElementById('imageUploadModal');
                const modalOverlay = modal.querySelector('.modal-overlay');
                const modalCloseBtn = modal.querySelector('.modal-close');
                const uploadArea = document.getElementById('uploadArea');
                const uploadContent = document.getElementById('uploadContent');
                const modalImageInput = document.getElementById('modalImageInput');
                const cropArea = document.getElementById('cropArea');
                const cropCanvas = document.getElementById('cropCanvas');
                const cropBox = document.getElementById('cropBox');
                const cropSizeValue = document.getElementById('cropSizeValue');
                const loadingOverlay = document.getElementById('loadingOverlay');
                
                let currentImage = null;
                let cropData = {
                    x: 0,
                    y: 0,
                    width: 200,
                    height: 200,
                    isDragging: false,
                    isResizing: false,
                    startX: 0,
                    startY: 0,
                    startWidth: 0,
                    startHeight: 0
                };

                // Open modal
                window.openImageUploadModal = function() {
                    modal.style.display = 'flex';
                    resetModal();
                };

                // Close modal
                window.closeImageUploadModal = function() {
                    modal.style.display = 'none';
                    resetModal();
                };

                // Reset modal state
                function resetModal() {
                    uploadArea.style.display = 'block';
                    cropArea.style.display = 'none';
                    modalImageInput.value = '';
                    currentImage = null;
                    cropData = {
                        x: 0,
                        y: 0,
                        width: 200,
                        height: 200,
                        isDragging: false,
                        isResizing: false,
                        startX: 0,
                        startY: 0,
                        startWidth: 0,
                        startHeight: 0
                    };
                }

                // Handle file selection
                modalImageInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file && file.type.startsWith('image/')) {
                        const reader = new FileReader();
                        reader.onload = function(event) {
                            currentImage = new Image();
                            currentImage.onload = function() {
                                showCropArea();
                            };
                            currentImage.src = event.target.result;
                        };
                        reader.readAsDataURL(file);
                    }
                });

                // Show crop area
                function showCropArea() {
                    uploadArea.style.display = 'none';
                    cropArea.style.display = 'block';
                    
                    // Calculate initial crop size (circular, max 200px diameter)
                    const maxSize = 200;
                    const displayWidth = Math.min(400, currentImage.width);
                    const displayHeight = (displayWidth / currentImage.width) * currentImage.height;
                    
                    // Set canvas size
                    cropCanvas.width = displayWidth;
                    cropCanvas.height = displayHeight;
                    
                    // Calculate circular crop size (use smaller dimension)
                    const cropSize = Math.min(maxSize, displayWidth, displayHeight);
                    cropData.width = cropSize;
                    cropData.height = cropSize; // Keep it square for circular crop
                    
                    // Center the crop box
                    // Since the crop box is positioned relative to the overlay, and canvas may be centered,
                    // we need to position the crop box at 0,0 initially and let the canvas be centered via CSS
                    cropData.x = 0;
                    cropData.y = 0;
                    
                    // Adjust canvas size and positioning via CSS to center it
                    cropCanvas.style.maxWidth = '400px';
                    cropCanvas.style.margin = '0 auto';
                    cropCanvas.style.display = 'block';
                    
                    drawCropArea();
                }

                // Draw crop area
                function drawCropArea() {
                    if (!currentImage) return;
                    
                    const ctx = cropCanvas.getContext('2d');
                    
                    // Clear canvas
                    ctx.clearRect(0, 0, cropCanvas.width, cropCanvas.height);
                    
                    // Draw image
                    ctx.drawImage(currentImage, 0, 0, cropCanvas.width, cropCanvas.height);
                    
                    // Update crop box position and size
                    cropBox.style.left = cropData.x + 'px';
                    cropBox.style.top = cropData.y + 'px';
                    cropBox.style.width = cropData.width + 'px';
                    cropBox.style.height = cropData.height + 'px';
                    
                    // Update size display (show diameter for circle)
                    cropSizeValue.textContent = `${Math.round(cropData.width)}px diameter`;
                }

                // Crop box dragging
                cropBox.addEventListener('mousedown', function(e) {
                    if (e.target.classList.contains('crop-handle')) {
                        // Start resizing
                        cropData.isResizing = true;
                        cropData.startX = e.clientX;
                        cropData.startY = e.clientY;
                        cropData.startWidth = cropData.width;
                        cropData.startHeight = cropData.height;
                    } else {
                        // Start dragging
                        cropData.isDragging = true;
                        
                        // Get the current position of the crop box relative to the page
                        const cropBoxRect = cropBox.getBoundingClientRect();
                        
                        // Store the offset from mouse to crop box corner
                        cropData.startX = e.clientX - cropBoxRect.left;
                        cropData.startY = e.clientY - cropBoxRect.top;
                    }
                    e.preventDefault();
                });

                // Mouse move handler
                document.addEventListener('mousemove', function(e) {
                    if (cropData.isDragging) {
                        // Calculate new position based on mouse movement
                        const newX = e.clientX - cropData.startX;
                        const newY = e.clientY - cropData.startY;
                        
                        // Get crop overlay bounds (the direct parent of crop box)
                        const cropOverlayRect = document.querySelector('.crop-overlay').getBoundingClientRect();
                        const canvasRect = cropCanvas.getBoundingClientRect();
                        
                        // Calculate position relative to crop overlay
                        const relativeX = newX - cropOverlayRect.left;
                        const relativeY = newY - cropOverlayRect.top;
                        
                        // Constrain to canvas bounds (accounting for canvas position within overlay)
                        const canvasOffsetX = canvasRect.left - cropOverlayRect.left;
                        const canvasOffsetY = canvasRect.top - cropOverlayRect.top;
                        
                        cropData.x = Math.max(canvasOffsetX, Math.min(canvasOffsetX + canvasRect.width - cropData.width, relativeX));
                        cropData.y = Math.max(canvasOffsetY, Math.min(canvasOffsetY + canvasRect.height - cropData.height, relativeY));
                        
                        drawCropArea();
                    } else if (cropData.isResizing) {
                        // Get canvas position for accurate mouse tracking
                        const canvasRect = cropCanvas.getBoundingClientRect();
                        const mouseX = e.clientX - canvasRect.left;
                        const mouseY = e.clientY - canvasRect.top;
                        
                        // Calculate distance from center for circular resize
                        const centerX = cropData.x + cropData.width / 2;
                        const centerY = cropData.y + cropData.height / 2;
                        const distance = Math.sqrt(Math.pow(mouseX - centerX, 2) + Math.pow(mouseY - centerY, 2));
                        
                        // Calculate new size based on distance
                        const newSize = Math.max(50, Math.min(
                            Math.min(cropCanvas.width, cropCanvas.height),
                            distance * 2
                        ));
                        
                        cropData.width = newSize;
                        cropData.height = newSize;
                        
                        // Keep centered while resizing
                        cropData.x = centerX - newSize / 2;
                        cropData.y = centerY - newSize / 2;
                        
                        // Constrain to canvas bounds
                        cropData.x = Math.max(0, Math.min(cropCanvas.width - newSize, cropData.x));
                        cropData.y = Math.max(0, Math.min(cropCanvas.height - newSize, cropData.y));
                        
                        drawCropArea();
                    }
                });

                // Mouse up handler
                document.addEventListener('mouseup', function() {
                    cropData.isDragging = false;
                    cropData.isResizing = false;
                });

                // Reset crop
                window.resetCrop = function() {
                    if (currentImage) {
                        showCropArea();
                    }
                };

                // Apply crop
                window.applyCrop = function() {
                    if (!currentImage) return;
                    
                    showLoading();
                    
                    // Create a temporary canvas for cropping
                    const tempCanvas = document.createElement('canvas');
                    const tempCtx = tempCanvas.getContext('2d');
                    
                    // Calculate the actual crop coordinates on the original image
                    const scaleX = currentImage.width / cropCanvas.width;
                    const scaleY = currentImage.height / cropCanvas.height;
                    
                    // Convert overlay-relative coordinates to canvas-relative coordinates
                    const canvasRect = cropCanvas.getBoundingClientRect();
                    const cropOverlayRect = document.querySelector('.crop-overlay').getBoundingClientRect();
                    
                    const canvasOffsetX = canvasRect.left - cropOverlayRect.left;
                    const canvasOffsetY = canvasRect.top - cropOverlayRect.top;
                    
                    const canvasX = cropData.x - canvasOffsetX;
                    const canvasY = cropData.y - canvasOffsetY;
                    
                    const actualX = canvasX * scaleX;
                    const actualY = canvasY * scaleY;
                    const actualSize = cropData.width * scaleX; // Since it's circular, width = height
                    
                    // Set canvas size to the crop size (square for circular crop)
                    tempCanvas.width = actualSize;
                    tempCanvas.height = actualSize;
                    
                    // Create circular clipping path
                    tempCtx.beginPath();
                    tempCtx.arc(actualSize / 2, actualSize / 2, actualSize / 2, 0, 2 * Math.PI);
                    tempCtx.clip();
                    
                    // Draw the cropped portion
                    tempCtx.drawImage(currentImage, actualX, actualY, actualSize, actualSize, 0, 0, actualSize, actualSize);
                    
                    // Update the profile avatar
                    const profileAvatar = document.getElementById('profileAvatar');
                    if (profileAvatar) {
                        profileAvatar.src = tempCanvas.toDataURL('image/jpeg', 0.9);
                    }
                    
                    // Hide loading and close modal
                    setTimeout(() => {
                        hideLoading();
                        closeImageUploadModal();
                        showNotification('Profile image updated successfully!', 'success');
                    }, 500);
                };

                // Show loading overlay
                function showLoading() {
                    loadingOverlay.style.display = 'flex';
                }

                // Hide loading overlay
                function hideLoading() {
                    loadingOverlay.style.display = 'none';
                }

                // Drag and drop functionality
                uploadArea.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });

                uploadArea.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                });

                uploadArea.addEventListener('drop', function(e) {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                    
                    const files = e.dataTransfer.files;
                    if (files.length > 0 && files[0].type.startsWith('image/')) {
                        modalImageInput.files = files;
                        const event = new Event('change', { bubbles: true });
                        modalImageInput.dispatchEvent(event);
                    }
                });

                // Click to upload
                uploadArea.addEventListener('click', function() {
                    modalImageInput.click();
                });

                // Close modal events
                modalOverlay.addEventListener('click', closeImageUploadModal);
                modalCloseBtn.addEventListener('click', closeImageUploadModal);
                
                // ESC key to close modal
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && modal.style.display === 'flex') {
                        closeImageUploadModal();
                    }
                });
            }

            // Initialize profile functionality
            initializeProfile();
            initializeImageUploadModal();
        });

        // ===== ENHANCED SERVER STATUS FUNCTIONALITY =====
        document.addEventListener('DOMContentLoaded', function() {
            // Server status checking
            function checkServerStatus() {
                const servers = [
                    { id: 'main', name: 'Main Server', url: `${API_BASE}/api/status/main` },
                    { id: 'game', name: 'Game Server', url: `${API_BASE}/api/status/game` },
                    { id: 'file', name: 'File Server', url: `${API_BASE}/api/status/file` },
                    { id: 'api', name: 'API Services', url: `${API_BASE}/api/status/api` }
                ];
                
                let onlineCount = 0;
                
                servers.forEach(server => {
                    const statusItem = document.getElementById(`status-${server.id}`);
                    const statusIndicator = document.getElementById(`status-${server.id}-ind`);
                    const statusDetails = document.getElementById(`status-${server.id}-details`);
                    
                    if (!statusItem || !statusIndicator || !statusDetails) return;
                    
                    // Simulate server status check
                    const isOnline = Math.random() > 0.1; // 90% uptime
                    const responseTime = Math.floor(Math.random() * 100) + 20; // 20-120ms
                    
                    if (isOnline) {
                        onlineCount++;
                        statusItem.className = 'server-status-item online';
                        statusIndicator.className = 'server-status-indicator online';
                        statusDetails.textContent = `operational â€¢ ${responseTime}ms`;
                    } else {
                        statusItem.className = 'server-status-item offline';
                        statusIndicator.className = 'server-status-indicator offline';
                        statusDetails.textContent = 'connection failed';
                    }
                });
                
                // Update overall status
                updateOverallStatus(onlineCount, servers.length);
                updateLastChecked();
            }
            
            function updateOverallStatus(onlineCount, totalCount) {
                const overallStatus = document.getElementById('overallStatus');
                if (!overallStatus) return;
                
                const statusIcon = overallStatus.querySelector('.status-icon .iconify');
                const statusTitle = overallStatus.querySelector('.status-title');
                
                if (onlineCount === totalCount) {
                    statusIcon.setAttribute('data-icon', 'mdi:check-circle');
                    statusTitle.textContent = 'all systems operational';
                    overallStatus.className = 'overall-status good';
                } else if (onlineCount > 0) {
                    statusIcon.setAttribute('data-icon', 'mdi:alert-circle');
                    statusTitle.textContent = 'some services degraded';
                    overallStatus.className = 'overall-status warning';
                } else {
                    statusIcon.setAttribute('data-icon', 'mdi:close-circle');
                    statusTitle.textContent = 'major outage detected';
                    overallStatus.className = 'overall-status error';
                }
            }
            
            function updateLastChecked() {
                const lastChecked = document.getElementById('lastChecked');
                if (!lastChecked) return;
                
                const now = new Date();
                const timeString = now.toLocaleTimeString('en-US', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                lastChecked.textContent = timeString;
            }
            
            // Refresh buttons
            const refreshStatusBtn = document.getElementById('refreshStatusBtn');
            const refreshNewsBtn = document.getElementById('refreshNewsBtn');
            
            if (refreshStatusBtn) {
                refreshStatusBtn.addEventListener('click', () => {
                    refreshStatusBtn.disabled = true;
                    refreshStatusBtn.innerHTML = '<span class="iconify" data-icon="mdi:loading"></span> checking...';
                    
                    setTimeout(() => {
                        checkServerStatus();
                        refreshStatusBtn.disabled = false;
                        refreshStatusBtn.innerHTML = '<span class="iconify" data-icon="mdi:refresh"></span> refresh';
                        showNotification('Server status updated!', 'success');
                    }, 1500);
                });
            }
            
            if (refreshNewsBtn) {
                refreshNewsBtn.addEventListener('click', () => {
                    refreshNewsBtn.disabled = true;
                    refreshNewsBtn.innerHTML = '<span class="iconify" data-icon="mdi:loading"></span> refreshing...';
                    
                    setTimeout(() => {
                        refreshNewsBtn.disabled = false;
                        refreshNewsBtn.innerHTML = '<span class="iconify" data-icon="mdi:refresh"></span> refresh';
                        showNotification('News feed updated!', 'success');
                    }, 1000);
                });
            }
            
            // Subscribe and history buttons
            const subscribeStatusBtn = document.getElementById('subscribeStatusBtn');
            const statusHistoryBtn = document.getElementById('statusHistoryBtn');
            const viewAllNewsBtn = document.getElementById('viewAllNewsBtn');
            
            if (subscribeStatusBtn) {
                subscribeStatusBtn.addEventListener('click', () => {
                    showNotification('Status alerts subscription coming soon!', 'info');
                });
            }
            
            if (statusHistoryBtn) {
                statusHistoryBtn.addEventListener('click', () => {
                    showNotification('Status history coming soon!', 'info');
                });
            }
            
            if (viewAllNewsBtn) {
                viewAllNewsBtn.addEventListener('click', () => {
                    showNotification('News archive coming soon!', 'info');
                });
            }
            
            // Initial status check
            checkServerStatus();
            
            // Auto-refresh every 30 seconds
            setInterval(checkServerStatus, 30000);
        });
    </script>

    <!-- Image Upload Modal -->
    <div id="imageUploadModal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeImageUploadModal()"></div>
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span class="iconify" data-icon="mdi:image-edit"></span>
                    Upload & Crop Avatar
                </h3>
                <button class="modal-close" onclick="closeImageUploadModal()">
                    <span class="iconify" data-icon="mdi:close"></span>
                </button>
            </div>
            <div class="modal-body">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content" id="uploadContent">
                        <span class="iconify upload-icon" data-icon="mdi:cloud-upload"></span>
                        <h4>Drop your image here</h4>
                        <p>or click to browse</p>
                        <input type="file" id="modalImageInput" accept="image/*" style="display: none;">
                        <button class="btn btn-primary" onclick="document.getElementById('modalImageInput').click()">
                            <span class="iconify" data-icon="mdi:folder-open"></span>
                            Browse Files
                        </button>
                    </div>
                </div>
                <div class="crop-area" id="cropArea" style="display: none;">
                    <div class="crop-container">
                        <canvas id="cropCanvas"></canvas>
                        <div class="crop-overlay">
                            <div class="crop-box" id="cropBox">
                                <div class="crop-handle crop-handle-nw"></div>
                                <div class="crop-handle crop-handle-ne"></div>
                                <div class="crop-handle crop-handle-sw"></div>
                                <div class="crop-handle crop-handle-se"></div>
                            </div>
                        </div>
                    </div>
                    <div class="crop-controls">
                        <div class="crop-info">
                            <span class="crop-size-label">Size:</span>
                            <span class="crop-size-value" id="cropSizeValue">200x200</span>
                        </div>
                        <div class="crop-actions">
                            <button class="btn btn-secondary" onclick="resetCrop()">
                                <span class="iconify" data-icon="mdi:refresh"></span>
                                Reset
                            </button>
                            <button class="btn btn-primary" onclick="applyCrop()">
                                <span class="iconify" data-icon="mdi:check"></span>
                                Apply Crop
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <div class="loading-text">Processing image...</div>
    </div>
</body>
    <script src="settings.js"></script>
    <script src="currency.js"></script>
    <script src="avatar-renderer.js"></script>
    <script src="avatar-thumbnail-service.js"></script>
    <script src="avatar-editor.js"></script>
</html>